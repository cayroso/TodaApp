!function(t){function e(e){for(var s,o,r=e[0],l=e[1],c=e[2],m=0,v=[];m<r.length;m++)o=r[m],Object.prototype.hasOwnProperty.call(i,o)&&i[o]&&v.push(i[o][0]),i[o]=0;for(s in l)Object.prototype.hasOwnProperty.call(l,s)&&(t[s]=l[s]);for(d&&d(e);v.length;)v.shift()();return n.push.apply(n,c||[]),a()}function a(){for(var t,e=0;e<n.length;e++){for(var a=n[e],s=!0,r=1;r<a.length;r++){var l=a[r];0!==i[l]&&(s=!1)}s&&(n.splice(e--,1),t=o(o.s=a[0]))}return t}var s={},i={26:0},n=[];function o(e){if(s[e])return s[e].exports;var a=s[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=t,o.c=s,o.d=function(t,e,a){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)o.d(a,s,function(e){return t[e]}.bind(null,s));return a},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/app/";var r=window.webpackJsonp=window.webpackJsonp||[],l=r.push.bind(r);r.push=e,r=r.slice();for(var c=0;c<r.length;c++)e(r[c]);var d=l;n.push(["VOYw",4,17,8,3,9,20,10,12,22,5,1,13,21,11,15,14,2,19,6,18,16,23,7,0,24]),a()}({"0OlL":function(t,e,a){},"38u5":function(t,e,a){},"4/lp":function(t,e,a){},"4BK8":function(t,e,a){},"4LKQ":function(t,e,a){"use strict";a("SpUA")},"4lgk":function(t,e,a){},"7WaM":function(t,e,a){},"7wfw":function(t,e,a){},"8vKp":function(t,e,a){"use strict";a("7wfw")},"AC0/":function(t,e,a){"use strict";a("4/lp")},"G/qJ":function(t,e,a){},McbD:function(t,e,a){"use strict";a("wOqt")},RjEP:function(t,e,a){"use strict";var s=a("jE9Z"),i=a("EQT1"),n={mixins:[i.a],props:{uid:String},components:{},data(){return{moment:moment,togglesKey:`dashboard/${this.uid}/toggles`,toggles:{tasks:!0,contacts:!0,attachments:!0},item:{newTasks:[],upcomingTasks:[],overdueTasks:[],newContacts:[],recentAttachments:[]}}},computed:{},async created(){const t=this,e=JSON.parse(localStorage.getItem(t.togglesKey))||null;e&&(t.toggles=e),await t.get()},async mounted(){},methods:{async get(){const t=this;if(!t.busy){t.busy=!0;try{await t.$util.axios.get("/api/drivers/default/dashboard").then((e=>{t.item=e.data}))}catch(e){t.$util.handleError(e)}finally{t.busy=!1}}}}},o=a("KHd+"),r=Object(o.a)(n,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{},[a("div",{staticClass:"row align-items-center"},[t._m(0),t._v(" "),a("div",{staticClass:"col-auto"},[a("button",{staticClass:"btn btn-outline-primary",on:{click:t.get}},[a("i",{staticClass:"fas fa-fw fa-sync"})])])]),t._v(" "),a("div",{staticClass:"mt-2"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-sm"},[a("div",{staticClass:"card"},[a("div",{staticClass:"card-header"},[t._v("\n                        Earning and Trip Summary\n                    ")]),t._v(" "),a("div",{staticClass:"table-responsive mb-0"},[a("table",{staticClass:"table"},[a("tbody",[t._m(1),t._v(" "),a("tr",[a("th",[t._v("Earnings")]),t._v(" "),a("td",[t._v("\n                                        "+t._s(t._f("toCurrency")(t.item.sumMonthEarnings))+"\n                                    ")]),t._v(" "),a("td",[t._v("\n                                        "+t._s(t._f("toCurrency")(t.item.sumWeekEarnings))+"\n                                        "),t.item.sumWeekEarnings>=t.item.sumLastWeekEarnings?a("i",{staticClass:"fas fa-fw fa-arrow-up text-success"}):a("i",{staticClass:"fas fa-fw fa-arrow-down text-danger"})]),t._v(" "),a("td",[t._v("\n                                        "+t._s(t._f("toCurrency")(t.item.sumTodayEarnings))+"\n                                        "),t.item.sumTodayEarnings>=t.item.sumYesterdayEarnings?a("i",{staticClass:"fas fa-fw fa-arrow-up text-success"}):a("i",{staticClass:"fas fa-fw fa-arrow-down text-danger"})])]),t._v(" "),a("tr",[a("th",[t._v("# of Trips")]),t._v(" "),a("td",[t._v("\n                                        "+t._s(t.item.totalMonthTrips)+"\n                                    ")]),t._v(" "),a("td",[t._v("\n                                        "+t._s(t.item.totalWeekTrips)+"\n                                        "),t.item.totalWeekTrips>=t.item.totalLastWeekTrips?a("i",{staticClass:"fas fa-fw fa-arrow-up text-success"}):a("i",{staticClass:"fas fa-fw fa-arrow-down text-danger"})]),t._v(" "),a("td",[t._v("\n                                        "+t._s(t.item.totalTodayTrips)+"\n                                        "),t.item.totalWeekTrips>=t.item.totalLastWeekTrips?a("i",{staticClass:"fas fa-fw fa-arrow-up text-success"}):a("i",{staticClass:"fas fa-fw fa-arrow-down text-danger"})])])])])])])]),t._v(" "),a("div",{staticClass:"d-block d-sm-none p-2"}),t._v(" "),a("div",{staticClass:"col-sm"},[a("div",{staticClass:"card"},[a("div",{staticClass:"card-header"},[t._v("\n                        Top Riders\n                    ")]),t._v(" "),a("div",{staticClass:"table-responsive mb-0"},[a("table",{staticClass:"table"},[t._m(2),t._v(" "),a("tbody",t._l(t.item.topRiders,(function(e,s){return a("tr",[a("td",[t._v(t._s(s+1))]),t._v(" "),a("td",[a("div",{staticClass:"d-flex flex-row justify-content-start align-items-center"},[a("div",[a("b-avatar",{attrs:{src:e.imageUrl,inline:!0}})],1),t._v(" "),a("div",{staticClass:"ml-2"},[a("div",[t._v(t._s(e.name))]),t._v(" "),a("div",{staticClass:"mt-1"},[a("b-form-rating",{attrs:{id:"rating-inline",inline:"","no-border":"",size:"sm",readonly:""},model:{value:e.rating,callback:function(a){t.$set(e,"rating",a)},expression:"t.rating"}})],1)])])]),t._v(" "),a("td",[t._v(t._s(t._f("toCurrency")(e.totalFare)))]),t._v(" "),a("td",[t._v(t._s(e.totalTrip))])])})),0)])])])])])])])}),[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col"},[a("h1",{staticClass:"h3 mb-sm-0"},[a("i",{staticClass:"fas fa-fw fa-tachometer-alt mr-1"}),t._v("Dashboard\n            ")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",[a("td"),t._v(" "),a("th",[t._v("Month")]),t._v(" "),a("th",[t._v("Week")]),t._v(" "),a("th",[t._v("Today")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",[t._v("#")]),t._v(" "),a("th",[t._v("Rider")]),t._v(" "),a("th",[t._v("Total Fare")]),t._v(" "),a("th",[t._v("# of Trips")])])])}],!1,null,null,null).exports,l=a("qUQk"),c={props:{uid:String},components:{accountsIndex:l.a},data:()=>({}),computed:{},async created(){},async mounted(){},methods:{}},d=Object(o.a)(c,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{},[e("accounts-index")],1)}),[],!1,null,null,null).exports,m=a("8KAK"),v={data:()=>({isDirty:!1,validations:new Map,busy:!1,lookups:{taskTypes:[{value:1,text:"Follow-Up Email"},{value:2,text:"Phone Call"},{value:3,text:"Demo"},{value:4,text:"Lunch Meeting"},{value:5,text:"Meetup"},{value:6,text:"Others"}]},item:{},taskType:null,title:"",description:"",taskItems:[],taskItemTitle:"",dateToComplete:moment().format("YYYY-MM-DD")}),computed:{formIsValid(){const t=this,e=new Map;return t.taskType||e.set("taskType","Task type is required."),t.dateToComplete||e.set("dateToComplete","Date to complete is required."),t.title||e.set("title","Title is required."),t.taskItems.length<=0&&e.set("taskItems","At least 1 task item is required."),t.isDirty=!0,t.validations=e,0==e.size}},methods:{getValidClass(t){return this.isDirty?this.validations.has(t)?"is-invalid":"is-valid":""},resetItem(){const t=this;t.taskType=null,t.title=null,t.description=null,t.taskItems=[],t.taskItemTitle="",t.dateToComplete=moment().format("YYYY-MM-DD"),t.isDirty=!1,t.validations.clear()},onSelectedTaskTypeChanged(t){const e=this;if(!e.title){const a=e.lookups.taskTypes.find((e=>e.value===t));e.title=a.text,e.taskItems.length<=0&&e.taskItems.push(a.text)}},removeTaskItem(t){this.taskItems.splice(t,1)},addTaskItem(){const t=this;t.taskItemTitle&&(t.taskItems.push(t.taskItemTitle),t.taskItemTitle="")},async open(t){const e=this;e.resetItem(),e.item=t,e.$refs.modal.show()},close(){this.$refs.modal.hide()},async save(){const t=this;if(!t.busy&&t.formIsValid){t.busy=!0;try{const e={contactId:t.item.contactId,taskType:t.taskType,title:t.title,description:t.description,dateToComplete:moment(t.dateToComplete).utc(),taskItems:t.taskItems.map((t=>({title:t})))},a=JSON.stringify(e),s=new Blob([a],{type:"application/json"}),i=new FormData;i.append("info",s),await t.$util.axios.post("/api/members/tasks",i).then((e=>{t.$bvToast.toast("Task added.",{title:"Add Task",variant:"success",toaster:"b-toaster-bottom-right"})})),t.$emit("saved"),t.close()}catch(e){t.$util.handleError(e)}finally{t.busy=!1}}}}},u=(a("4LKQ"),Object(o.a)(v,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-modal",{ref:"modal",attrs:{"no-close-on-esc":!1,"no-close-on-backdrop":!0,scrollable:""},scopedSlots:t._u([{key:"modal-header",fn:function(){return[a("div",{staticClass:"d-sm-flex align-items-center justify-content-between"},[a("h1",{staticClass:"h5 m-0"},[t._v("\n                Add Task\n            ")])])]},proxy:!0},{key:"modal-footer",fn:function(){return[a("button",{staticClass:"btn btn-info mr-auto",attrs:{disabled:t.busy},on:{click:t.resetItem}},[t._v("\n            Reset\n        ")]),t._v(" "),a("button",{staticClass:"btn btn-primary",attrs:{disabled:t.busy||t.isDirty&&!t.formIsValid},on:{click:t.save}},[t._v("\n            Save\n        ")]),t._v(" "),a("button",{staticClass:"btn btn-secondary",attrs:{disabled:t.busy},on:{click:t.close}},[t._v("\n            Close\n        ")])]},proxy:!0}])},[t._v(" "),t._v(" "),a("div",[a("b-overlay",{attrs:{show:t.busy}},[a("div",{staticClass:"form-row"},[a("div",{staticClass:"form-group col-md"},[a("label",{attrs:{for:"firstName"}},[t._v("Contact")]),t._v(" "),a("div",[t._v("\n                        "+t._s(t.item.firstName)+" "+t._s(t.item.middleName)+" "+t._s(t.item.lastName)+"\n                    ")])]),t._v(" "),a("div",{staticClass:"form-group col-md-3"},[a("label",{attrs:{for:"firstName"}},[t._v("Status")]),t._v(" "),a("div",[t._v(t._s(t.item.statusText))])]),t._v(" "),a("div",{staticClass:"form-group col-md-3"},[a("label",{attrs:{for:"firstName"}},[t._v("Rating")]),t._v(" "),a("div",[a("b-form-rating",{attrs:{inline:"","no-border":"",size:"sm",id:"rating",readonly:""},model:{value:t.item.rating,callback:function(e){t.$set(t.item,"rating",e)},expression:"item.rating"}})],1)])]),t._v(" "),a("hr"),t._v(" "),a("div",{staticClass:"form-row"},[a("div",{staticClass:"form-group col-md"},[a("label",{attrs:{for:"title"}},[t._v("Task Type")]),t._v(" "),a("div",[a("b-form-select",{class:t.getValidClass("taskType"),attrs:{options:t.lookups.taskTypes},on:{change:t.onSelectedTaskTypeChanged},model:{value:t.taskType,callback:function(e){t.taskType=e},expression:"taskType"}}),t._v(" "),t.validations.get("taskType")?a("span",{staticClass:"text-danger"},[t._v("\n                            "+t._s(t.validations.get("taskType"))+"\n                        ")]):t._e()],1)]),t._v(" "),a("div",{staticClass:"form-group col-md"},[a("label",{attrs:{for:"title"}},[t._v("Date to Complete")]),t._v(" "),a("div",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.dateToComplete,expression:"dateToComplete"}],staticClass:"form-control",class:t.getValidClass("dateToComplete"),attrs:{type:"date"},domProps:{value:t.dateToComplete},on:{input:function(e){e.target.composing||(t.dateToComplete=e.target.value)}}}),t._v(" "),t.validations.get("dateToComplete")?a("span",{staticClass:"text-danger"},[t._v("\n                            "+t._s(t.validations.get("dateToComplete"))+"\n                        ")]):t._e()])])]),t._v(" "),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"title"}},[t._v("Title")]),t._v(" "),a("div",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.title,expression:"title"}],staticClass:"form-control",class:t.getValidClass("title"),attrs:{type:"text",id:"title"},domProps:{value:t.title},on:{input:function(e){e.target.composing||(t.title=e.target.value)}}}),t._v(" "),t.validations.get("title")?a("span",{staticClass:"text-danger"},[t._v("\n                        "+t._s(t.validations.get("title"))+"\n                    ")]):t._e()])]),t._v(" "),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"description"}},[t._v("Description")]),t._v(" "),a("div",[a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.description,expression:"description"}],staticClass:"form-control",attrs:{rows:"2",id:"description"},domProps:{value:t.description},on:{input:function(e){e.target.composing||(t.description=e.target.value)}}})])]),t._v(" "),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"description"}},[t._v("Task Items")]),t._v(" "),a("div",{staticClass:"table-responsive",class:t.getValidClass("taskItems")},[a("table",{staticClass:"table table-sm table-hover"},[a("thead",[a("tr",[a("th",[t._v("#")]),t._v(" "),a("th",[t._v("Title")]),t._v(" "),a("th")])]),t._v(" "),a("tbody",t._l(t.taskItems,(function(e,s){return a("tr",[a("td",[t._v(t._s(s+1))]),t._v(" "),a("td",[t._v(t._s(e))]),t._v(" "),a("td",[a("button",{staticClass:"btn btn-sm btn-outline-warning",on:{click:function(e){return t.removeTaskItem(s)}}},[a("i",{staticClass:"fas fa-fw fa-trash"})])])])})),0),t._v(" "),a("tfoot",[a("tr",[a("td",{attrs:{colspan:"2"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.taskItemTitle,expression:"taskItemTitle"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.taskItemTitle},on:{input:function(e){e.target.composing||(t.taskItemTitle=e.target.value)}}})]),t._v(" "),a("td",[a("button",{staticClass:"btn btn-sm btn-outline-primary",on:{click:t.addTaskItem}},[a("i",{staticClass:"fas fa-fw fa-save"})])])])])])]),t._v(" "),t.validations.get("taskItems")?a("span",{staticClass:"text-danger"},[t._v("\n                    "+t._s(t.validations.get("taskItems"))+"\n                ")]):t._e()])])],1)])}),[],!1,null,"ea55886e",null).exports),f={mixins:[m.a],props:{uid:String,urlAdd:String,urlView:String},components:{modalAddTask:u},data(){return{baseUrl:"/api/members/contacts",filter:{cacheKey:`filter-${this.uid}/contacts`}}},computed:{},async created(){const t=this,e=JSON.parse(localStorage.getItem(t.filter.cacheKey))||{};t.initializeFilter(e),await t.search()},async mounted(){},methods:{addTask(t){const e={contactId:t.contactId,firstName:t.firstName,middleName:t.middleName,lastName:t.lastName,statusText:t.statusText,rating:t.rating};this.$refs.modalAddTask.open(e)}}},p=Object(o.a)(f,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{},[a("div",{staticClass:"row align-items-center"},[t._m(0),t._v(" "),a("div",{staticClass:"col-sm-auto"},[a("div",{staticClass:"d-flex flex-row"},[a("div",{staticClass:"mr-1"},[a("router-link",{staticClass:"btn btn-primary",attrs:{to:"/contacts/add"}},[a("i",{staticClass:"fas fa-plus"})])],1),t._v(" "),a("div",{staticClass:"flex-grow-1"},[a("div",{staticClass:"input-group"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.filter.query.criteria,expression:"filter.query.criteria"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Enter criteria...","aria-label":"Enter criteria...","aria-describedby":"button-addon2"},domProps:{value:t.filter.query.criteria},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.search(1)},input:function(e){e.target.composing||t.$set(t.filter.query,"criteria",e.target.value)}}}),t._v(" "),a("div",{staticClass:"input-group-append"},[a("button",{staticClass:"btn btn-primary",attrs:{type:"button",id:"button-addon2"},on:{click:function(e){return t.search(1)}}},[a("span",{staticClass:"fa fas fa-fw fa-search"})])])])])])])]),t._v(" "),a("b-collapse",{model:{value:t.filter.visible,callback:function(e){t.$set(t.filter,"visible",e)},expression:"filter.visible"}}),t._v(" "),a("b-overlay",{attrs:{show:t.busy}},[a("div",{staticClass:"mt-2 table-responsive shadow-sm"},[a("table-list",{attrs:{header:{key:"contactId",columns:[]},items:t.filter.items,getRowNumber:t.getRowNumber,setSelected:t.setSelected,isSelected:t.isSelected,"table-css":""},scopedSlots:t._u([{key:"header",fn:function(){return[a("th",{staticClass:"text-center"},[t._v("#")]),t._v(" "),a("th",[t._v("Name")]),t._v(" "),a("th",[t._v("Status")]),t._v(" "),a("th",[t._v("Contact #")]),t._v(" "),a("th")]},proxy:!0},{key:"table",fn:function(e){return[a("td",{staticClass:"text-center",domProps:{textContent:t._s(t.getRowNumber(e.index))}}),t._v(" "),a("td",[a("router-link",{attrs:{to:{name:"contactsView",params:{id:e.item.contactId}}}},["Unknown"!==e.item.salutationText?a("span",{staticClass:"mr-1"},[t._v(t._s(e.item.salutationText)+".")]):t._e(),t._v(t._s(e.item.firstName)+" "+t._s(e.item.middleName)+" "+t._s(e.item.lastName)+"\n                        ")]),t._v(" "),a("p",{staticClass:"small"},[t._v("\n                            "+t._s(e.item.email)+"\n                        ")])],1),t._v(" "),a("td",[a("div",[t._v(t._s(e.item.statusText))]),t._v(" "),a("b-form-rating",{attrs:{readonly:"",noBorder:!0,size:"sm",inline:!0,variant:"success"},model:{value:e.item.rating,callback:function(a){t.$set(e.item,"rating",a)},expression:"row.item.rating"}})],1),t._v(" "),a("td",[e.item.homePhone?a("p",{staticClass:"small mb-1"},[a("span",{staticClass:"fas fa-fw fa-phone mr-1"}),t._v(" "),a("a",{attrs:{href:"tel:"+e.item.homePhone}},[t._v(t._s(e.item.homePhone))])]):t._e(),t._v(" "),e.item.mobilePhone?a("p",{staticClass:"small mb-1"},[a("span",{staticClass:"fas fa-fw fa-mobile mr-1"}),t._v(" "),a("a",{attrs:{href:"tel:"+e.item.mobilePhone}},[t._v(t._s(e.item.mobilePhone))])]):t._e(),t._v(" "),e.item.businessPhone?a("p",{staticClass:"small mb-1"},[a("span",{staticClass:"fas fa-fw fa-fax mr-1"}),t._v(" "),a("a",{attrs:{href:"tel:"+e.item.businessPhone}},[t._v(t._s(e.item.businessPhone))])]):t._e()]),t._v(" "),a("td",[a("button",{staticClass:"btn btn-sm btn-outline-primary",on:{click:function(a){return t.addTask(e.item)}}},[t._v("Add Task")])])]}},{key:"list",fn:function(e){return[a("div",[a("div",{staticClass:"form-group mb-0 row no-gutters"},[a("label",{staticClass:"col-3 col-form-label"},[t._v("Name")]),t._v(" "),a("div",{staticClass:"col align-self-center"},[a("router-link",{attrs:{to:{name:"contactsView",params:{id:e.item.contactId}}}},["Unknown"!==e.item.salutationText?a("span",{staticClass:"mr-1"},[t._v(t._s(e.item.salutationText)+".")]):t._e(),t._v(t._s(e.item.firstName)+" "+t._s(e.item.middleName)+" "+t._s(e.item.lastName)+"\n                                ")])],1)]),t._v(" "),a("div",{staticClass:"form-group mb-0 row no-gutters"},[a("label",{staticClass:"col-3 col-form-label"},[t._v("Status")]),t._v(" "),a("div",{staticClass:"col align-self-center"},[a("div",[t._v(t._s(e.item.statusText))]),t._v(" "),a("b-form-rating",{attrs:{readonly:"",noBorder:!0,size:"sm",inline:!0,variant:"success"},model:{value:e.item.rating,callback:function(a){t.$set(e.item,"rating",a)},expression:"row.item.rating"}})],1)]),t._v(" "),a("div",{staticClass:"form-group mb-0 row no-gutters"},[a("label",{staticClass:"col-3 col-form-label"},[t._v("Email")]),t._v(" "),a("div",{staticClass:"col align-self-center"},[t._v("\n                                "+t._s(e.item.email)+"\n                            ")])]),t._v(" "),a("div",{staticClass:"form-group mb-0 row no-gutters"},[a("label",{staticClass:"col-3 col-form-label"},[t._v("Contact #")]),t._v(" "),a("div",{staticClass:"col"},[a("div",{staticClass:"form-control-plaintext"},[e.item.homePhone?a("p",{staticClass:"small mb-1"},[a("span",{staticClass:"fas fa-fw fa-phone mr-1"}),t._v(" "),a("a",{attrs:{href:"tel:"+e.item.homePhone}},[t._v(t._s(e.item.homePhone))])]):t._e(),t._v(" "),e.item.mobilePhone?a("p",{staticClass:"small mb-1"},[a("span",{staticClass:"fas fa-fw fa-mobile mr-1"}),t._v(" "),a("a",{attrs:{href:"tel:"+e.item.mobilePhone}},[t._v(t._s(e.item.mobilePhone))])]):t._e(),t._v(" "),e.item.businessPhone?a("p",{staticClass:"small mb-1"},[a("span",{staticClass:"fas fa-fw fa-fax mr-1"}),t._v(" "),a("a",{attrs:{href:"tel:"+e.item.businessPhone}},[t._v(t._s(e.item.businessPhone))])]):t._e()])])]),t._v(" "),a("div",{staticClass:"form-group mb-0 row no-gutters"},[a("div",{staticClass:"offset-3 col align-self-center"},[a("button",{staticClass:"btn btn-sm btn-outline-primary",on:{click:function(a){return t.addTask(e.item)}}},[t._v("Add Task")])])])])]}}])})],1)]),t._v(" "),a("m-pagination",{staticClass:"mt-2",attrs:{filter:t.filter,search:t.search,showPerPage:!0}}),t._v(" "),a("modal-add-task",{ref:"modalAddTask"})],1)}),[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-sm"},[a("h1",{staticClass:"h3 mb-sm-0"},[a("i",{staticClass:"fas fa-fw fa-id-card mr-1"}),t._v("Contacts\n            ")])])}],!1,null,null,null).exports,_={mixins:[i.a],props:{uid:String,id:String,urlView:String},data:()=>({isDirty:!1,validations:new Map,lookups:{salutations:[{value:1,text:"Mr"},{value:2,text:"Mrs"},{value:3,text:"Ms"}]},item:{salutation:null,firstName:null,middleName:null,lastName:null,title:null,company:null,industry:null,annualRevenue:null,homePhone:null,mobilePhone:null,businessPhone:null,fax:null,email:null,website:null,referralSource:null,dateOfInitialContact:moment().format("YYYY-MM-DD"),rating:null,address:null,geoX:0,geoY:0}}),computed:{formIsValid(){const t=this,e=t.item,a=new Map;!e.firstName&&!e.middleName&&!e.lastName&&(a.set("firstName","First name is required."),a.set("middleName","Middle name is required."),a.set("lastName","Last name is required.")),Number.isNaN(e.annualRevenue)&&a.set("annualRevenue","Annual Revenue is required.");return!(e.homePhone||e.mobilePhone||e.businessPhone||e.fax)&&(a.set("homePhone","Home Phone is required."),a.set("mobilePhone","Mobile Phone is required."),a.set("businessPhone","Business Phone is required."),a.set("fax","Fax is required.")),e.dateOfInitialContact||a.set("dateOfInitialContact","Date of initial contact is required."),t.isDirty=!0,t.validations=a,0==a.size}},async created(){},async mounted(){this.formIsValid},methods:{getValidClass(t){return this.isDirty?this.validations.has(t)?"is-invalid":"is-valid":""},async get(){const t=this;try{await t.$util.axios.get(`/api/owner/customers/${t.id}`).then((e=>{t.item=e.data}))}catch(e){t.$util.handleError(e)}},async onMapReady(){},onAddress(t,e){const a=this;a.item.address=t.formatted_address,a.item.geoX=e.lat,a.item.geoY=e.lng},async save(){const t=this;if(!t.busy&&t.formIsValid)try{t.busy=!0;const e=t.$util.clone(t.item);e.salutation=null===e.salutation?0:e.salutation,e.dateOfInitialContact=moment(e.dateOfInitialContact).utc(),e.annualRevenue=null===e.annualRevenue?0:e.annualRevenue,e.rating=null===e.rating?0:e.rating,await t.$util.axios.post("/api/members/contacts/",e).then((e=>{t.$bvToast.toast("Contact created.",{title:"Add Contact",variant:"success",toaster:"b-toaster-bottom-right"}),setTimeout((()=>{t.$router.push({name:"contactsView",params:{id:e.data}})}),500)}))}catch(e){t.$util.handleError(e)}finally{t.busy=!1}}}},g=(a("nusY"),Object(o.a)(_,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{},[a("div",{staticClass:"d-flex flex-column flex-sm-row justify-content-sm-between"},[a("h1",{staticClass:"h3 mb-sm-0"},[a("i",{staticClass:"fas fa-fw fa-user-tie mr-1"}),t.id?a("span",[t._v("Edit Contact")]):a("span",[t._v("Add Contact")])]),t._v(" "),a("div",{staticClass:"text-right"},[t.id?a("button",{staticClass:"btn btn-primary",on:{click:t.get}},[a("span",{staticClass:"fas fa-fw fa-sync"})]):t._e(),t._v(" "),a("button",{staticClass:"btn btn-primary",attrs:{disabled:t.isDirty&&!t.formIsValid},on:{click:t.save}},[a("span",{staticClass:"fas fa-fw fa-save"})]),t._v(" "),a("button",{staticClass:"btn btn-secondary",on:{click:t.close}},[a("span",{staticClass:"fas fa-fw fa-times-circle"})])])]),t._v(" "),a("div",{staticClass:"mt-2"},[a("div",{staticClass:"card shadow-sm"},[a("div",{staticClass:"card-header"},[t._v("\n                Information\n            ")]),t._v(" "),a("div",{staticClass:"card-body"},[a("div",{staticClass:"form-row"},[a("div",{staticClass:"form-group col-md-auto"},[a("label",[t._v("Salutation")]),t._v(" "),a("div",[a("b-form-select",{attrs:{options:t.lookups.salutations},model:{value:t.item.salutation,callback:function(e){t.$set(t.item,"salutation",e)},expression:"item.salutation"}})],1)]),t._v(" "),a("div",{staticClass:"form-group col-md"},[a("label",{attrs:{for:"firstName"}},[t._v("First Name")]),t._v(" "),a("div",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.item.firstName,expression:"item.firstName"}],staticClass:"form-control",class:t.getValidClass("firstName"),attrs:{type:"text",id:"firstName"},domProps:{value:t.item.firstName},on:{input:function(e){e.target.composing||t.$set(t.item,"firstName",e.target.value)}}}),t._v(" "),t.validations.has("firstName")?a("div",{staticClass:"invalid-feedback"},[t._v("\n                                "+t._s(t.validations.get("firstName"))+"\n                            ")]):t._e()])]),t._v(" "),a("div",{staticClass:"form-group col-md"},[a("label",[t._v("Middle Name")]),t._v(" "),a("div",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.item.middleName,expression:"item.middleName"}],staticClass:"form-control",class:t.getValidClass("middleName"),attrs:{type:"text"},domProps:{value:t.item.middleName},on:{input:function(e){e.target.composing||t.$set(t.item,"middleName",e.target.value)}}}),t._v(" "),t.validations.has("middleName")?a("div",{staticClass:"invalid-feedback"},[t._v("\n                                "+t._s(t.validations.get("middleName"))+"\n                            ")]):t._e()])]),t._v(" "),a("div",{staticClass:"form-group col-md"},[a("label",[t._v("Last Name")]),t._v(" "),a("div",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.item.lastName,expression:"item.lastName"}],staticClass:"form-control",class:t.getValidClass("lastName"),attrs:{type:"text"},domProps:{value:t.item.lastName},on:{input:function(e){e.target.composing||t.$set(t.item,"lastName",e.target.value)}}}),t._v(" "),t.validations.has("lastName")?a("div",{staticClass:"invalid-feedback"},[t._v("\n                                "+t._s(t.validations.get("lastName"))+"\n                            ")]):t._e()])])]),t._v(" "),a("hr",{staticClass:"d-md-none"}),t._v(" "),a("div",{staticClass:"form-row"},[a("div",{staticClass:"form-group col-md"},[a("label",[t._v("Job Title")]),t._v(" "),a("div",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.item.title,expression:"item.title"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.item.title},on:{input:function(e){e.target.composing||t.$set(t.item,"title",e.target.value)}}})])]),t._v(" "),a("div",{staticClass:"form-group col-md"},[a("label",[t._v("Company")]),t._v(" "),a("div",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.item.company,expression:"item.company"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.item.company},on:{input:function(e){e.target.composing||t.$set(t.item,"company",e.target.value)}}})])]),t._v(" "),a("div",{staticClass:"form-group col-md"},[a("label",[t._v("Industry")]),t._v(" "),a("div",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.item.industry,expression:"item.industry"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.item.industry},on:{input:function(e){e.target.composing||t.$set(t.item,"industry",e.target.value)}}})])]),t._v(" "),a("div",{staticClass:"form-group col-md"},[a("label",[t._v("Annual Revenue")]),t._v(" "),a("div",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.item.annualRevenue,expression:"item.annualRevenue"}],staticClass:"form-control",attrs:{type:"number",min:"0"},domProps:{value:t.item.annualRevenue},on:{input:function(e){e.target.composing||t.$set(t.item,"annualRevenue",e.target.value)}}})])])]),t._v(" "),a("hr",{staticClass:"d-md-none"}),t._v(" "),a("div",{staticClass:"form-row"},[a("div",{staticClass:"form-group col-md"},[a("label",[t._v("Home Phone")]),t._v(" "),a("div",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.item.homePhone,expression:"item.homePhone"}],staticClass:"form-control",class:t.getValidClass("homePhone"),attrs:{type:"tel"},domProps:{value:t.item.homePhone},on:{input:function(e){e.target.composing||t.$set(t.item,"homePhone",e.target.value)}}}),t._v(" "),t.validations.has("homePhone")?a("div",{staticClass:"invalid-feedback"},[t._v("\n                                "+t._s(t.validations.get("homePhone"))+"\n                            ")]):t._e()])]),t._v(" "),a("div",{staticClass:"form-group col-md"},[a("label",[t._v("Mobile Phone")]),t._v(" "),a("div",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.item.mobilePhone,expression:"item.mobilePhone"}],staticClass:"form-control",class:t.getValidClass("mobilePhone"),attrs:{type:"tel"},domProps:{value:t.item.mobilePhone},on:{input:function(e){e.target.composing||t.$set(t.item,"mobilePhone",e.target.value)}}}),t._v(" "),t.validations.has("mobilePhone")?a("div",{staticClass:"invalid-feedback"},[t._v("\n                                "+t._s(t.validations.get("mobilePhone"))+"\n                            ")]):t._e()])]),t._v(" "),a("div",{staticClass:"form-group col-md"},[a("label",[t._v("Business Phone")]),t._v(" "),a("div",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.item.businessPhone,expression:"item.businessPhone"}],staticClass:"form-control",class:t.getValidClass("businessPhone"),attrs:{type:"tel"},domProps:{value:t.item.businessPhone},on:{input:function(e){e.target.composing||t.$set(t.item,"businessPhone",e.target.value)}}}),t._v(" "),t.validations.has("businessPhone")?a("div",{staticClass:"invalid-feedback"},[t._v("\n                                "+t._s(t.validations.get("businessPhone"))+"\n                            ")]):t._e()])]),t._v(" "),a("div",{staticClass:"form-group col-md"},[a("label",[t._v("Fax")]),t._v(" "),a("div",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.item.fax,expression:"item.fax"}],staticClass:"form-control",class:t.getValidClass("fax"),attrs:{type:"tel"},domProps:{value:t.item.fax},on:{input:function(e){e.target.composing||t.$set(t.item,"fax",e.target.value)}}}),t._v(" "),t.validations.has("fax")?a("div",{staticClass:"invalid-feedback"},[t._v("\n                                "+t._s(t.validations.get("fax"))+"\n                            ")]):t._e()])])]),t._v(" "),a("hr",{staticClass:"d-md-none"}),t._v(" "),a("div",{staticClass:"form-row"},[a("div",{staticClass:"form-group col-md-4"},[a("label",[t._v("Email")]),t._v(" "),a("div",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.item.email,expression:"item.email"}],staticClass:"form-control",attrs:{type:"email"},domProps:{value:t.item.email},on:{input:function(e){e.target.composing||t.$set(t.item,"email",e.target.value)}}})])]),t._v(" "),a("div",{staticClass:"form-group col-md-5"},[a("label",[t._v("Website")]),t._v(" "),a("div",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.item.website,expression:"item.website"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.item.website},on:{input:function(e){e.target.composing||t.$set(t.item,"website",e.target.value)}}})])])]),t._v(" "),a("hr",{staticClass:"d-md-none"}),t._v(" "),a("div",{staticClass:"form-row"},[a("div",{staticClass:"form-group col-md-3"},[a("label",[t._v("Referral Source")]),t._v(" "),a("div",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.item.referralSource,expression:"item.referralSource"}],staticClass:"form-control",class:{"is-invalid":t.validations.get("referralSource")},attrs:{type:"text"},domProps:{value:t.item.referralSource},on:{input:function(e){e.target.composing||t.$set(t.item,"referralSource",e.target.value)}}}),t._v(" "),t.validations.get("referralSource")?a("span",{staticClass:"text-danger"},[t._v("\n                                "+t._s(t.validations.get("referralSource"))+"\n                            ")]):t._e()])]),t._v(" "),a("div",{staticClass:"form-group col-md-3"},[a("label",[t._v("Date Of Initial Contact")]),t._v(" "),a("div",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.item.dateOfInitialContact,expression:"item.dateOfInitialContact"}],staticClass:"form-control",class:t.getValidClass("dateOfInitialContact"),attrs:{type:"date"},domProps:{value:t.item.dateOfInitialContact},on:{input:function(e){e.target.composing||t.$set(t.item,"dateOfInitialContact",e.target.value)}}}),t._v(" "),t.validations.has("dateOfInitialContact")?a("div",{staticClass:"invalid-feedback"},[t._v("\n                                "+t._s(t.validations.get("dateOfInitialContact"))+"\n                            ")]):t._e()])]),t._v(" "),a("div",{staticClass:"form-group col-md"},[a("label",[t._v("Rating")]),t._v(" "),a("div",[a("b-form-rating",{attrs:{inline:""},model:{value:t.item.rating,callback:function(e){t.$set(t.item,"rating",e)},expression:"item.rating"}})],1)])])])]),t._v(" "),a("div",{staticClass:"mt-2 card shadow-sm"},[a("div",{staticClass:"card-header"},[t._v("\n                Location\n            ")]),t._v(" "),a("div",{staticClass:"card-body"},[a("div",{staticClass:"form-row"},[a("div",{staticClass:"form-group col"},[a("label",[t._v("Address")]),t._v(" "),a("div",[a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.item.address,expression:"item.address"}],staticClass:"form-control",class:{"is-invalid":t.validations.get("address")},attrs:{type:"text"},domProps:{value:t.item.address},on:{input:function(e){e.target.composing||t.$set(t.item,"address",e.target.value)}}}),t._v(" "),t.validations.get("address")?a("span",{staticClass:"text-danger"},[t._v("\n                                "+t._s(t.validations.get("address"))+"\n                            ")]):t._e()])])]),t._v(" "),t._m(0)])])])])}),[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"form-row d-none"},[a("div",{staticClass:"form-group col"},[a("label",[t._v("Map")]),t._v(" "),a("div",{staticStyle:{height:"400px"}})])])}],!1,null,"c2ca909a",null).exports),b={props:{uid:String,item:Object,busy:Boolean},data:()=>({isDirty:!1,validations:new Map,lookups:{salutations:[{value:1,text:"Mr"},{value:2,text:"Mrs"},{value:3,text:"Ms"}]},editMode:!1,itemEdit:{salutation:null,firstName:null,middleName:null,lastName:null,homePhone:null,mobilePhone:null,businessPhone:null,fax:null,email:null,website:null,address:null}}),computed:{viewMode(){return!this.editMode},formIsValid(){const t=this,e=(t.item,new Map);return t.isDirty=!0,t.validations=e,0==e.size}},async created(){},async mounted(){},methods:{edit(){const t=this,e=t.itemEdit,a=t.item;e.salutation=a.salutation,e.firstName=a.firstName,e.middleName=a.middleName,e.lastName=a.lastName,e.homePhone=a.homePhone,e.mobilePhone=a.mobilePhone,e.businessPhone=a.businessPhone,e.fax=a.fax,e.email=a.email,e.website=a.website,e.address=a.address,t.editMode=!0},async save(){const t=this;try{const e=t.$util.clone(t.itemEdit);e.contactId=t.item.contactId,e.token=t.item.token,await t.$util.axios.put("/api/members/contacts/edit-contact-information",e).then((e=>{t.$bvToast.toast("Contact information updated.",{title:"Update Contact Information",variant:"success",toaster:"b-toaster-bottom-right"}),t.$emit("updated")})),t.editMode=!1}catch(e){t.$util.handleError(e)}}}},C=(a("8vKp"),Object(o.a)(b,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-overlay",{attrs:{show:t.busy}},[a("div",{staticClass:"p-1 text-right"},[t.viewMode?a("button",{directives:[{name:"b-toggle",rawName:"v-b-toggle.collapse-1",modifiers:{"collapse-1":!0}}],staticClass:"btn btn-warning",on:{click:t.edit}},[a("i",{staticClass:"fas fa-fw fa-edit"})]):t._e(),t._v(" "),t.editMode?a("button",{staticClass:"btn btn-primary",attrs:{disabled:t.isDirty&&!t.formIsValid},on:{click:t.save}},[a("i",{staticClass:"fas fa-fw fa-save"})]):t._e(),t._v(" "),t.editMode?a("button",{staticClass:"btn btn-secondary",on:{click:function(e){t.editMode=!1}}},[a("i",{staticClass:"fas fa-fw fa-times"})]):t._e()]),t._v(" "),a("div",{staticClass:"p-2"},[a("b-collapse",{attrs:{visible:t.viewMode}},[a("div",{staticClass:"form-row"},[a("div",{staticClass:"form-group col-md"},[a("label",[t._v("Salutation")]),t._v(" "),a("div",{staticClass:"form-control-plaintext"},[t._v("\n                        "+t._s(t.item.salutationText)+"\n                    ")])]),t._v(" "),a("div",{staticClass:"form-group col-md"},[a("label",[t._v("First Name")]),t._v(" "),a("div",{staticClass:"form-control-plaintext"},[t._v("\n                        "+t._s(t.item.firstName)+"\n                    ")])]),t._v(" "),a("div",{staticClass:"form-group col-md"},[a("label",[t._v("Middle Name")]),t._v(" "),a("div",{staticClass:"form-control-plaintext"},[t._v("\n                        "+t._s(t.item.middleName)+"\n                    ")])]),t._v(" "),a("div",{staticClass:"form-group col-md"},[a("label",[t._v("Last Name")]),t._v(" "),a("div",{staticClass:"form-control-plaintext"},[t._v("\n                        "+t._s(t.item.lastName)+"\n                    ")])])]),t._v(" "),a("hr",{staticClass:"d-md-none"}),t._v(" "),a("div",{staticClass:"form-row"},[a("div",{staticClass:"form-group col-md"},[a("label",[t._v("Home Phone")]),t._v(" "),a("div",{staticClass:"form-control-plaintext"},[t._v("\n                        "+t._s(t.item.homePhone)+"\n                    ")])]),t._v(" "),a("div",{staticClass:"form-group col-md"},[a("label",[t._v("Mobile Phone")]),t._v(" "),a("div",{staticClass:"form-control-plaintext"},[t._v("\n                        "+t._s(t.item.mobilePhone)+"\n                    ")])]),t._v(" "),a("div",{staticClass:"form-group col-md"},[a("label",[t._v("Business Phone")]),t._v(" "),a("div",{staticClass:"form-control-plaintext"},[t._v("\n                        "+t._s(t.item.businessPhone)+"\n                    ")])]),t._v(" "),a("div",{staticClass:"form-group col-md"},[a("label",[t._v("Fax")]),t._v(" "),a("div",{staticClass:"form-control-plaintext"},[t._v("\n                        "+t._s(t.item.fax)+"\n                    ")])])]),t._v(" "),a("hr",{staticClass:"d-md-none"}),t._v(" "),a("div",{staticClass:"form-row"},[a("div",{staticClass:"form-group col-md-4"},[a("label",[t._v("Email")]),t._v(" "),a("div",{staticClass:"form-control-plaintext"},[t._v("\n                        "+t._s(t.item.email)+"\n                    ")])]),t._v(" "),a("div",{staticClass:"form-group col-md-5"},[a("label",[t._v("Website")]),t._v(" "),a("div",{staticClass:"form-control-plaintext"},[t._v("\n                        "+t._s(t.item.website)+"\n                    ")])])]),t._v(" "),a("hr",{staticClass:"d-md-none"}),t._v(" "),a("div",{staticClass:"form-row"},[a("div",{staticClass:"form-group col-md"},[a("label",[t._v("Address")]),t._v(" "),a("div",{staticClass:"form-control-plaintext"},[t._v("\n                        "+t._s(t.item.address)+"\n                    ")])])])]),t._v(" "),a("b-collapse",{attrs:{visible:t.editMode}},[a("div",{staticClass:"form-row"},[a("div",{staticClass:"form-group col-md"},[a("label",{attrs:{for:"salutationEdit"}},[t._v("Salutation")]),t._v(" "),a("b-form-select",{attrs:{id:"salutationEdit",options:t.lookups.salutations},model:{value:t.itemEdit.salutation,callback:function(e){t.$set(t.itemEdit,"salutation",e)},expression:"itemEdit.salutation"}})],1),t._v(" "),a("div",{staticClass:"form-group col-md"},[a("label",{attrs:{for:"firstNameEdit"}},[t._v("First Name")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.itemEdit.firstName,expression:"itemEdit.firstName"}],staticClass:"form-control",attrs:{type:"text",id:"firstNameEdit"},domProps:{value:t.itemEdit.firstName},on:{input:function(e){e.target.composing||t.$set(t.itemEdit,"firstName",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"form-group col-md"},[a("label",{attrs:{for:"middleNameEdit"}},[t._v("Middle Name")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.itemEdit.middleName,expression:"itemEdit.middleName"}],staticClass:"form-control",attrs:{type:"text",id:"middleNameEdit"},domProps:{value:t.itemEdit.middleName},on:{input:function(e){e.target.composing||t.$set(t.itemEdit,"middleName",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"form-group col-md"},[a("label",{attrs:{for:"lastNameEdit"}},[t._v("Last Name")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.itemEdit.lastName,expression:"itemEdit.lastName"}],staticClass:"form-control",attrs:{type:"text",id:"lastNameEdit"},domProps:{value:t.itemEdit.lastName},on:{input:function(e){e.target.composing||t.$set(t.itemEdit,"lastName",e.target.value)}}})])]),t._v(" "),a("hr",{staticClass:"d-md-none"}),t._v(" "),a("div",{staticClass:"form-row"},[a("div",{staticClass:"form-group col-md"},[a("label",{attrs:{for:"homePhoneEdit"}},[t._v("Home Phone")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.itemEdit.homePhone,expression:"itemEdit.homePhone"}],staticClass:"form-control",attrs:{type:"tel",id:"homePhoneEdit"},domProps:{value:t.itemEdit.homePhone},on:{input:function(e){e.target.composing||t.$set(t.itemEdit,"homePhone",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"form-group col-md"},[a("label",{attrs:{for:"mobilePhoneEdit"}},[t._v("Mobile Phone")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.itemEdit.mobilePhone,expression:"itemEdit.mobilePhone"}],staticClass:"form-control",attrs:{type:"tel",id:"mobilePhoneEdit"},domProps:{value:t.itemEdit.mobilePhone},on:{input:function(e){e.target.composing||t.$set(t.itemEdit,"mobilePhone",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"form-group col-md"},[a("label",{attrs:{for:"businessPhoneEdit"}},[t._v("Business Phone")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.itemEdit.businessPhone,expression:"itemEdit.businessPhone"}],staticClass:"form-control",attrs:{type:"tel",id:"businessPhoneEdit"},domProps:{value:t.itemEdit.businessPhone},on:{input:function(e){e.target.composing||t.$set(t.itemEdit,"businessPhone",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"form-group col-md"},[a("label",{attrs:{for:"faxEdit"}},[t._v("Fax")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.itemEdit.fax,expression:"itemEdit.fax"}],staticClass:"form-control",attrs:{type:"tel",id:"faxEdit"},domProps:{value:t.itemEdit.fax},on:{input:function(e){e.target.composing||t.$set(t.itemEdit,"fax",e.target.value)}}})])]),t._v(" "),a("hr",{staticClass:"d-md-none"}),t._v(" "),a("div",{staticClass:"form-row"},[a("div",{staticClass:"form-group col-md-4"},[a("label",{attrs:{for:"emailEdit"}},[t._v("Email")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.itemEdit.email,expression:"itemEdit.email"}],staticClass:"form-control",attrs:{type:"email",id:"emailEdit"},domProps:{value:t.itemEdit.email},on:{input:function(e){e.target.composing||t.$set(t.itemEdit,"email",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"form-group col-md-5"},[a("label",{attrs:{for:"websiteEdit"}},[t._v("Website")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.itemEdit.website,expression:"itemEdit.website"}],staticClass:"form-control",attrs:{type:"text",id:"websiteEdit"},domProps:{value:t.itemEdit.website},on:{input:function(e){e.target.composing||t.$set(t.itemEdit,"website",e.target.value)}}})])]),t._v(" "),a("hr",{staticClass:"d-md-none"}),t._v(" "),a("div",{staticClass:"form-row"},[a("div",{staticClass:"form-group col-md"},[a("label",{attrs:{for:"addressEdit"}},[t._v("Address")]),t._v(" "),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.itemEdit.address,expression:"itemEdit.address"}],staticClass:"form-control",attrs:{rows:"3",id:"addressEdit"},domProps:{value:t.itemEdit.address},on:{input:function(e){e.target.composing||t.$set(t.itemEdit,"address",e.target.value)}}})])])])],1)])}),[],!1,null,"08d0f46e",null).exports),h={props:{uid:String,item:Object,busy:Boolean},data:()=>({isDirty:!1,validations:new Map,editMode:!1,itemEdit:{title:null,company:null,industry:null,annualRevenue:null}}),computed:{viewMode(){return!this.editMode},formIsValid(){const t=this,e=(t.item,new Map);return t.isDirty=!0,t.validations=e,0==e.size}},async created(){},async mounted(){},methods:{edit(){const t=this,e=t.itemEdit,a=t.item;e.title=a.title,e.company=a.company,e.industry=a.industry,e.annualRevenue=a.annualRevenue,t.editMode=!0},async save(){const t=this;try{const e=t.$util.clone(t.itemEdit);e.contactId=t.item.contactId,e.token=t.item.token,await t.$util.axios.put("/api/members/contacts/edit-work-information",e).then((e=>{t.$bvToast.toast("Work information updated.",{title:"Update Work Information",variant:"success",toaster:"b-toaster-bottom-right"}),t.$emit("updated")})),t.editMode=!1}catch(e){t.$util.handleError(e)}}}},y=(a("wLdd"),Object(o.a)(h,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-overlay",{attrs:{show:t.busy}},[a("div",{staticClass:"p-1 text-right"},[t.viewMode?a("button",{directives:[{name:"b-toggle",rawName:"v-b-toggle.collapse-1",modifiers:{"collapse-1":!0}}],staticClass:"btn btn-warning",on:{click:t.edit}},[a("i",{staticClass:"fas fa-fw fa-edit"})]):t._e(),t._v(" "),t.editMode?a("button",{staticClass:"btn btn-primary",attrs:{disabled:t.isDirty&&!t.formIsValid},on:{click:t.save}},[a("i",{staticClass:"fas fa-fw fa-save"})]):t._e(),t._v(" "),t.editMode?a("button",{staticClass:"btn btn-secondary",on:{click:function(e){t.editMode=!1}}},[a("i",{staticClass:"fas fa-fw fa-times"})]):t._e()]),t._v(" "),a("div",{staticClass:"p-2"},[a("b-collapse",{attrs:{visible:t.viewMode}},[a("div",{staticClass:"form-row"},[a("div",{staticClass:"form-group col-md"},[a("label",[t._v("Job Title")]),t._v(" "),a("div",{staticClass:"form-control-plaintext"},[t._v("\n                        "+t._s(t.item.title)+"\n                    ")])]),t._v(" "),a("div",{staticClass:"form-group col-md"},[a("label",[t._v("Company")]),t._v(" "),a("div",{staticClass:"form-control-plaintext"},[t._v("\n                        "+t._s(t.item.company)+"\n                    ")])]),t._v(" "),a("div",{staticClass:"form-group col-md"},[a("label",[t._v("Industry")]),t._v(" "),a("div",{staticClass:"form-control-plaintext"},[t._v("\n                        "+t._s(t.item.industry)+"\n                    ")])]),t._v(" "),a("div",{staticClass:"form-group col-md"},[a("label",[t._v("Annual Revenue")]),t._v(" "),a("div",{staticClass:"form-control-plaintext"},[t._v("\n                        "+t._s(t._f("toCurrency")(t.item.annualRevenue))+"\n                    ")])])])]),t._v(" "),a("b-collapse",{attrs:{visible:t.editMode}},[a("div",{staticClass:"form-row"},[a("div",{staticClass:"form-group col-md"},[a("label",{attrs:{for:"titleEdit"}},[t._v("Job Title")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.itemEdit.title,expression:"itemEdit.title"}],staticClass:"form-control",attrs:{type:"text",id:"titleEdit"},domProps:{value:t.itemEdit.title},on:{input:function(e){e.target.composing||t.$set(t.itemEdit,"title",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"form-group col-md"},[a("label",{attrs:{for:"companyEdit"}},[t._v("Company")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.itemEdit.company,expression:"itemEdit.company"}],staticClass:"form-control",attrs:{type:"text",id:"companyEdit"},domProps:{value:t.itemEdit.company},on:{input:function(e){e.target.composing||t.$set(t.itemEdit,"company",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"form-group col-md"},[a("label",{attrs:{for:"industryEdit"}},[t._v("Industry")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.itemEdit.industry,expression:"itemEdit.industry"}],staticClass:"form-control",attrs:{type:"text",id:"industryEdit"},domProps:{value:t.itemEdit.industry},on:{input:function(e){e.target.composing||t.$set(t.itemEdit,"industry",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"form-group col-md"},[a("label",{attrs:{for:"annualRevenueEdit"}},[t._v("Annual Revenue")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.itemEdit.annualRevenue,expression:"itemEdit.annualRevenue"}],staticClass:"form-control",attrs:{type:"number",min:"0",id:"annualRevenueEdit"},domProps:{value:t.itemEdit.annualRevenue},on:{input:function(e){e.target.composing||t.$set(t.itemEdit,"annualRevenue",e.target.value)}}})])])])],1)])}),[],!1,null,"d8e84ad8",null).exports),w={data:()=>({isAdd:null,id:null,token:null,title:null,content:null}),methods:{async open(t,e,a,s,i){const n=this;n.isAdd=t,n.id=e,n.token=a,n.title=s,n.content=i,n.$refs.modal.show()},close(){this.$refs.modal.hide()},async save(t){const e=this;try{const a={token:e.token,title:e.title,content:e.content};e.isAdd?(a.contactId=e.id,await e.$util.axios.post("/api/members/contacts/add-note",a).then((t=>{e.$bvToast.toast("Note added.",{title:"Add Note",variant:"success",toaster:"b-toaster-bottom-right"})}))):(a.contactAttachmentId=e.id,await e.$util.axios.put("/api/members/contacts/edit-note",a).then((t=>{e.$bvToast.toast("Note updated.",{title:"Edit Note",variant:"success",toaster:"b-toaster-bottom-right"}),e.token=t.data}))),e.$emit("saved"),t?(e.title="",e.content=""):e.close()}catch(t){e.$util.handleError(t)}}}},k=Object(o.a)(w,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-modal",{ref:"modal",attrs:{"no-close-on-esc":!1,"no-close-on-backdrop":!0,scrollable:""},scopedSlots:t._u([{key:"modal-header",fn:function(){return[a("div",{staticClass:"d-sm-flex align-items-center justify-content-between"},[a("h1",{staticClass:"h5 m-0"},[t.isAdd?a("span",[t._v("\n                    Add Note\n                ")]):a("span",[t._v("\n                    Edit Note\n                ")])])])]},proxy:!0},{key:"modal-footer",fn:function(){return[a("button",{staticClass:"btn btn-primary",on:{click:function(e){return t.save(!1)}}},[t._v("\n            Save\n        ")]),t._v(" "),t.isAdd?a("button",{staticClass:"btn btn-primary",on:{click:function(e){return t.save(!0)}}},[t._v("\n            Save and Add\n        ")]):t._e(),t._v(" "),a("button",{staticClass:"btn btn-secondary",on:{click:t.close}},[t._v("\n            Close\n        ")])]},proxy:!0}])},[t._v(" "),t._v(" "),a("div",[a("div",{staticClass:"form-row1"},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"title"}},[t._v("Title")]),t._v(" "),a("div",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.title,expression:"title"}],staticClass:"form-control",attrs:{type:"text",id:"title"},domProps:{value:t.title},on:{input:function(e){e.target.composing||(t.title=e.target.value)}}})])]),t._v(" "),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"content"}},[t._v("Content")]),t._v(" "),a("div",[a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.content,expression:"content"}],staticClass:"form-control",attrs:{rows:"4",id:"content"},domProps:{value:t.content},on:{input:function(e){e.target.composing||(t.content=e.target.value)}}})])])])])])}),[],!1,null,null,null).exports,x={data:()=>({busy:!1,contactId:null,token:null,imageFiles:null,imageFileUrls:null,imageName:null,imageLink:null}),computed:{imageFilesValid(){const t=this;return Array.isArray(t.imageFiles)?t.imageFiles.length>0:null!=t.imageFiles}},methods:{onImageFileChange(t){const e=this;var a=[];a=Array.isArray(t)?t:[t],e.imageFileUrls=[];for(var s=0;s<a.length;s++){const t=a[s];t&&e.imageFileUrls.push(URL.createObjectURL(t))}},clearImageFile(t){const e=this;Array.isArray(e.imageFiles)?(e.imageFiles.splice(t,1),e.imageFileUrls.splice(t,1)):(e.imageFiles=null,e.imageFileUrls=null)},async open(t,e){const a=this;a.busy=!1,a.contactId=t,a.token=e,a.$refs.modal.show()},close(){this.$refs.modal.hide()},async save(){const t=this;if(!t.busy)try{t.busy=!0;const e={contactId:t.contactId,token:t.token,imageLink:t.imageLink,imageName:t.imageName},a=JSON.stringify(e),s=new Blob([a],{type:"application/json"}),i=new FormData;i.append("info",s),Array.isArray(t.imageFiles)?t.imageFiles.forEach((t=>{i.append("files",t)})):i.append("files",t.imageFiles),await t.$util.axios.post("/api/members/contacts/add-file",i).then((e=>{t.$bvToast.toast("File added.",{title:"Add File",variant:"success",toaster:"b-toaster-bottom-right"})})),t.$emit("saved"),t.close()}catch(e){t.$util.handleError(e)}finally{t.busy=!1}}}},$=Object(o.a)(x,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-modal",{ref:"modal",attrs:{"no-close-on-esc":!1,"no-close-on-backdrop":!0,scrollable:""},scopedSlots:t._u([{key:"modal-header",fn:function(){return[a("div",{staticClass:"d-sm-flex align-items-center justify-content-between"},[a("h1",{staticClass:"h5 m-0"},[a("span",{staticClass:"text-capitalize"},[t._v("Add File")])])])]},proxy:!0},{key:"modal-footer",fn:function(){return[a("button",{staticClass:"btn btn-primary",attrs:{disable:t.busy},on:{click:t.save}},[t._v("\n            Save\n        ")]),t._v(" "),a("button",{staticClass:"btn btn-secondary",on:{click:t.close}},[t._v("\n            Close\n        ")])]},proxy:!0}])},[t._v(" "),t._v(" "),a("b-overlay",{attrs:{show:t.busy}},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"title"}},[t._v("Link")]),t._v(" "),a("div",[a("div",{attrs:{disabled:null===t.imageFileUrls||t.imageFileUrls.length<=0}},[a("div",{staticClass:"d-flex flex-row mb-2"},[a("div",{staticClass:"w-100"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.imageLink,expression:"imageLink"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Enter image link"},domProps:{value:t.imageLink},on:{input:function(e){e.target.composing||(t.imageLink=e.target.value)}}}),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.imageName,expression:"imageName"}],staticClass:"form-control mt-1",attrs:{type:"text",placeholder:"Enter image Name"},domProps:{value:t.imageName},on:{input:function(e){e.target.composing||(t.imageName=e.target.value)}}})]),t._v(" "),t.imageLink?a("div",{staticClass:"ml-2"},[a("button",{staticClass:"btn btn-danger",on:{click:function(e){t.imageLink=null}}},[a("span",{staticClass:"fas fa-fw fa-trash"})])]):t._e()]),t._v(" "),t.imageLink?a("b-img-lazy",{attrs:{src:t.imageLink,fluid:"",center:""}}):t._e()],1)])]),t._v(" "),a("div",{staticClass:"text-center"},[t._v("\n            Or\n        ")]),t._v(" "),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"title"}},[t._v("File")]),t._v(" "),null===t.imageLink?a("div",[a("div",{staticClass:"d-flex flex-row"},[a("b-form-file",{attrs:{accept:"*/*",state:t.imageFilesValid,placeholder:"Choose a file or drop it here...",capture:Boolean(0),multiple:Boolean(0),"drop-placeholder":"Drop file here..."},on:{input:t.onImageFileChange},model:{value:t.imageFiles,callback:function(e){t.imageFiles=e},expression:"imageFiles"}}),t._v(" "),t.imageFileUrls?a("div",{staticClass:"ml-2"},[a("button",{staticClass:"btn btn-danger",on:{click:function(e){return t.clearImageFile(0)}}},[a("span",{staticClass:"fas fa-fw fa-trash"})])]):t._e()],1),t._v(" "),t.imageFileUrls?a("div",{staticClass:"mt-2"},t._l(t.imageFileUrls,(function(e,s){return a("div",[a("div",[t.imageFiles.type.startsWith("image/")?a("b-img-lazy",{attrs:{src:e,fluid:"",center:""}}):t._e()],1)])})),0):t._e(),t._v(" "),t.imageLink?a("div",[t._v("\n                    "+t._s(t.imageLink)+"\n                ")]):t._e()]):t._e()])])],1)}),[],!1,null,null,null).exports,T={props:{uid:String,id:String,token:String,items:Array,busy:Boolean},components:{modalAddNote:k,modalAddFile:$},data:()=>({}),computed:{},async created(){},async mounted(){},methods:{updated(){this.$emit("updated")},async deleteNote(t,e){const a=this;if(!a.busy)try{this.$bvModal.msgBoxConfirm("Are you sure you want to delete this note?").then((async s=>{s&&(await a.$util.axios.delete(`/api/members/contacts/delete-attachment/${t}/${e}`).then((t=>{a.$bvToast.toast("Note deleted.",{title:"Delete Note",variant:"warning",toaster:"b-toaster-bottom-right"})})),a.updated())})).catch((t=>{a.$util.handleError(t)}))}catch(t){a.$util.handleError(t)}finally{a.busy=!1}}}},N=Object(o.a)(T,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-overlay",{attrs:{show:t.busy}},[a("div",{staticClass:"p-1 text-right"},[a("button",{staticClass:"btn btn-primary",on:{click:function(e){return t.$refs.modalAddNote.open(!0,t.id,t.token)}}},[a("i",{staticClass:"fas fa-fw fa-plus"}),t._v("Add Note\n        ")]),t._v(" "),a("button",{staticClass:"btn btn-primary",on:{click:function(e){return t.$refs.modalAddFile.open(t.id,t.token)}}},[a("i",{staticClass:"fas fa-fw fa-plus"}),t._v("Add File\n        ")])]),t._v(" "),a("div",{staticClass:"table-responsive mb-0"},[a("table",{staticClass:"table table-borderless"},[a("tbody",[t._l(t.items,(function(e,s){return[a("tr",[a("td",[t._v(t._s(s+1))]),t._v(" "),a("td",{staticClass:"text-break"},[1===e.attachmentType?a("i",{staticClass:"fas fa-fw fa-sticky-note"}):2===e.attachmentType?a("i",[e.contentType&&e.contentType.startsWith("image/")?a("i",{staticClass:"fas fa-fw fa-image"}):a("i",{staticClass:"fas fa-fw fa-paperclip"})]):t._e(),t._v("\n                            "+t._s(e.title||e.fileName)+"\n                        ")]),t._v(" "),a("td",[a("div",{staticClass:"text-right d-fkex flex-row"},[1===e.attachmentType?a("button",{staticClass:"btn btn-sm btn-warning",on:{click:function(a){return t.$refs.modalAddNote.open(!1,e.contactAttachmentId,e.token,e.title,e.content)}}},[a("i",{staticClass:"fas fa-fw fa-edit"})]):t._e(),t._v(" "),a("span",{staticClass:"w-100 my-1 d-block d-sm-none"}),t._v(" "),1===e.attachmentType||e.contentType&&e.contentType.startsWith("image/")?a("button",{directives:[{name:"b-toggle",rawName:"v-b-toggle",value:"view-"+e.contactAttachmentId,expression:"`view-${item.contactAttachmentId}`"}],staticClass:"btn btn-sm btn-info"},[a("i",{staticClass:"fas fa-fw fa-eye"})]):t._e(),t._v(" "),a("span",{staticClass:"w-100 my-1 d-block d-sm-none"}),t._v(" "),2===e.attachmentType?a("a",{staticClass:"btn btn-sm btn-info",attrs:{href:e.url}},[a("i",{staticClass:"fas fa-fw fa-file-download"})]):t._e(),t._v(" "),a("span",{staticClass:"w-100 my-2 d-block d-sm-none"}),t._v(" "),a("button",{staticClass:"btn btn-sm btn-danger ml-md-2",on:{click:function(a){return t.deleteNote(e.contactAttachmentId,e.token)}}},[a("i",{staticClass:"fas fa-fw fa-trash"})])])])]),t._v(" "),a("tr",[a("td",{staticClass:"p-0 m-0",attrs:{colspan:"3"}},[a("b-collapse",{staticClass:"p-1",attrs:{id:"view-"+e.contactAttachmentId}},[1===e.attachmentType?a("div",[t._v("\n                                    "+t._s(e.content)+"\n                                ")]):t._e(),t._v(" "),2===e.attachmentType?a("div",[e.contentType&&e.contentType.startsWith("image/")?a("div",[a("b-img-lazy",{attrs:{src:e.url,fluid:"",center:""}})],1):a("div",[a("object",{attrs:{data:""+e.url,type:e.contentType,height:"100%",width:"100%"}},[a("p",[t._v("\n                                                Your browser does not support PDFs.\n                                                "),a("a",{attrs:{href:"https://example.com/test.pdf"}},[t._v("Download the PDF")]),t._v(".\n                                            ")])])])]):t._e(),t._v(" "),a("div",{staticClass:"small text-right p-1"},[a("div",[t._v("Created: "+t._s(t._f("moment")(e.dateCreated,"calendar")))]),t._v(" "),e.dateCreated!==e.dateUpdated?a("div",[t._v(" Updated: "+t._s(t._f("moment")(e.dateUpdated,"calendar")))]):t._e()])])],1),t._v(" "),a("td",{staticClass:"m-0 p-0"})])]}))],2)])]),t._v(" "),a("modal-add-note",{ref:"modalAddNote",on:{saved:t.updated}}),t._v(" "),a("modal-add-file",{ref:"modalAddFile",on:{saved:t.updated}})],1)}),[],!1,null,null,null).exports,E={data:()=>({moment:moment,busy:!1,taskId:null,item:{contact:{}}}),methods:{async open(t){const e=this;e.taskId=t,await e.get(),e.$refs.modal.show()},close(){this.$refs.modal.hide()},async get(){const t=this;if(!t.busy)try{await t.$util.axios.get(`/api/members/tasks/${t.taskId}`).then((e=>{t.item=e.data}))}catch(e){t.$util.handleError(e)}finally{t.busy=!1}},async updateTaskItem(t){const e=this;if(!e.busy)try{const a=e.item;await e.$util.axios.put(`/api/members/tasks/update-task-item/${a.taskId}/${t.taskItemId}/${t.isDone}`).then((async t=>{e.$bvToast.toast("Task Item updated.",{title:"Update Task Item",variant:"success",toaster:"b-toaster-bottom-right"}),e.$emit("updated"),e.get()}))}catch(t){e.$util.handleError(t)}finally{e.busy=!1}},deleteTask(){const t=this;if(!t.busy){t.busy=!0;try{this.$bvModal.msgBoxConfirm("Are you sure you want to delete this task?").then((async e=>{if(e){const e=t.item,a=`/api/members/tasks/${e.taskId}/${e.token}`;await t.$util.axios.delete(a).then((e=>{t.$emit("removed"),t.close()}))}})).catch((e=>{t.$util.handleError(e)}))}catch(e){t.$util.handleError(e)}finally{t.busy=!1}}}}},I=(a("T2kB"),Object(o.a)(E,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-modal",{ref:"modal",attrs:{"no-close-on-esc":!1,"no-close-on-backdrop":!0,scrollable:""},scopedSlots:t._u([{key:"modal-header",fn:function(){return[a("div",{staticClass:"w-100"},[a("div",{staticClass:"d-flex flex-row  align-items-center justify-content-between"},[a("h5",{staticClass:"m-0"},[t._v("\n                    View Task\n                ")]),t._v(" "),a("h6",{staticClass:"m-0"},[t._v("\n                    "+t._s(t.item.taskTypeText)+" - "+t._s(t.item.taskStatusText)+"\n                ")])])])]},proxy:!0},{key:"modal-footer",fn:function(){return[a("button",{staticClass:"btn btn-danger",on:{click:t.deleteTask}},[t._v("\n            Delete\n        ")]),t._v(" "),a("button",{staticClass:"btn btn-secondary",on:{click:t.close}},[t._v("\n            Close\n        ")])]},proxy:!0}])},[t._v(" "),t._v(" "),a("div",[a("div",{staticClass:"form-row"},[a("div",{staticClass:"form-group col-md"},[a("label",{attrs:{for:"firstName"}},[t._v("Contact")]),t._v(" "),a("div",[a("router-link",{attrs:{to:{name:"contactsView",params:{id:t.item.contact.contactId}}}},[t._v("\n                        "+t._s(t.item.contact.firstName)+" "+t._s(t.item.contact.middleName)+" "+t._s(t.item.contact.lastName)+"\n                    ")])],1)]),t._v(" "),a("div",{staticClass:"form-group col-md-3"},[a("label",{attrs:{for:"firstName"}},[t._v("Status")]),t._v(" "),a("div",[t._v(t._s(t.item.contact.statusText))])]),t._v(" "),a("div",{staticClass:"form-group col-md-3"},[a("label",{attrs:{for:"firstName"}},[t._v("Rating")]),t._v(" "),a("div",[a("b-form-rating",{attrs:{inline:"","no-border":"",size:"sm",id:"rating",readonly:""},model:{value:t.item.contact.rating,callback:function(e){t.$set(t.item.contact,"rating",e)},expression:"item.contact.rating"}})],1)])]),t._v(" "),a("div",{staticClass:"form-row"},[a("div",{staticClass:"form-group col-md order-1 order-md-0"},[a("label",{attrs:{for:"title"}},[t._v("Title")]),t._v(" "),a("div",[t._v("\n                    "+t._s(t.item.title)+"\n                ")])]),t._v(" "),a("div",{staticClass:"form-group col order-0 order-md-1"},[a("label",{attrs:{for:"dateActualCompleted"}},[t._v("Dates")]),t._v(" "),a("div",[a("button",{directives:[{name:"b-popover",rawName:"v-b-popover.hover.top",value:""+t.moment(t.item.dateAssigned).calendar(),expression:"`${moment(item.dateAssigned).calendar()}`",modifiers:{hover:!0,top:!0}}],staticClass:"btn btn-sm btn-outline-info",attrs:{title:"Date Assigned"}},[a("i",{staticClass:"fas fa-fw fa-calendar"})]),t._v(" "),a("button",{directives:[{name:"b-popover",rawName:"v-b-popover.hover.top",value:""+t.moment(t.item.dateCompleted).calendar(),expression:"`${moment(item.dateCompleted).calendar()}`",modifiers:{hover:!0,top:!0}}],staticClass:"btn btn-sm btn-outline-info",attrs:{title:"Date to Complete"}},[a("i",{staticClass:"fas fa-fw fa-calendar-plus"})]),t._v(" "),t.moment(t.item.dateActualCompleted).isBefore()?a("button",{directives:[{name:"b-popover",rawName:"v-b-popover.hover.top",value:""+t.moment(t.item.dateActualCompleted).calendar(),expression:"`${moment(item.dateActualCompleted).calendar()}`",modifiers:{hover:!0,top:!0}}],staticClass:"btn btn-sm btn-outline-info",attrs:{title:"Actual Date Completed"}},[a("i",{staticClass:"fas fa-fw fa-calendar-check"})]):t._e()])])]),t._v(" "),t.item.description?a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"description"}},[t._v("Description")]),t._v(" "),a("div",[t._v("\n                "+t._s(t.item.description)+"\n            ")])]):t._e(),t._v(" "),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"description"}},[t._v("Task Items")]),t._v(" "),a("div",{staticClass:"table-responsive mb-0"},[a("table",{staticClass:"table table-sm"},[a("thead",[a("tr",[a("td"),t._v(" "),a("td",[t._v("Title")]),t._v(" "),a("td",[t._v("Date Completed")])])]),t._v(" "),a("tbody",t._l(t.item.taskItems,(function(e,s){return a("tr",{class:{"table-success":e.isDone}},[a("td",[a("div",{staticClass:"custom-control custom-switch"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.isDone,expression:"taskItem.isDone"}],staticClass:"custom-control-input",attrs:{type:"checkbox",id:"customSwitch-"+e.taskItemId},domProps:{checked:Array.isArray(e.isDone)?t._i(e.isDone,null)>-1:e.isDone},on:{change:[function(a){var s=e.isDone,i=a.target,n=!!i.checked;if(Array.isArray(s)){var o=t._i(s,null);i.checked?o<0&&t.$set(e,"isDone",s.concat([null])):o>-1&&t.$set(e,"isDone",s.slice(0,o).concat(s.slice(o+1)))}else t.$set(e,"isDone",n)},function(a){return t.updateTaskItem(e)}]}}),t._v(" "),a("label",{staticClass:"custom-control-label",attrs:{for:"customSwitch-"+e.taskItemId}})])]),t._v(" "),a("td",[a("label",{staticClass:"font-weight-normal",attrs:{for:"customSwitch-"+e.taskItemId}},[t._v("\n                                    "+t._s(e.title)+"\n                                ")])]),t._v(" "),a("td",[e.isDone?a("div",[t._v("\n                                    "+t._s(t._f("moment")(e.dateCompleted,"calendar"))+"\n                                ")]):t._e()])])})),0)])])])])])}),[],!1,null,"9d57b8ca",null).exports),P={props:{uid:String,item:Object,busy:Boolean},components:{modalAddTask:u,modalViewTask:I},data:()=>({moment:moment}),computed:{},async created(){},async mounted(){},methods:{getTaskTrCss(t){switch(t.taskStatus){case 1:return"table-warning";case 2:return"table-info";case 3:return"table-success";default:return""}},getTaskTdCss(t){switch(t.taskStatus){case 1:return"table-warning";case 2:return"table-info";case 3:return"table-success";default:return""}},addTask(){const t=this.item,e={contactId:t.contactId,firstName:t.firstName,middleName:t.middleName,lastName:t.lastName,statusText:t.systemInformation.statusText,rating:t.rating};this.$refs.modalAddTask.open(e)},viewTask(t){}}},S=Object(o.a)(P,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-overlay",{attrs:{show:t.busy}},[a("div",{staticClass:"p-1 d-flex flex-row justify-content-between"},[a("div",[t._v("\n            Legend:\n            "),a("span",{staticClass:"badge badge-warning"},[t._v("Todo")]),t._v(" "),a("span",{staticClass:"badge badge-info"},[t._v("InProgress")]),t._v(" "),a("span",{staticClass:"badge badge-success"},[t._v("Complete")])]),t._v(" "),a("button",{staticClass:"btn btn-primary",on:{click:t.addTask}},[a("i",{staticClass:"fas fa-fw fa-plus"})])]),t._v(" "),a("div",{staticClass:"table-responsive mb-0"},[a("table",{staticClass:"table table-bordered table-hover"},[a("thead",[a("tr",[a("th",{staticClass:"text-center mx-sm-0 px-sm-0"},[t._v("#")]),t._v(" "),a("th",[t._v("Title")]),t._v(" "),a("th",[t._v("Type")])])]),t._v(" "),a("tbody",[t._l(t.item.tasks,(function(e,s){return[a("tr",[a("td",{staticClass:"text-center align-middle mx-sm-0 px-sm-0",class:t.getTaskTdCss(e),attrs:{rowspan:e.description?3:2}},[t._v("\n                            "+t._s(s+1)+"\n                        ")]),t._v(" "),a("td",[a("a",{attrs:{href:"#"},on:{click:function(a){return a.preventDefault(),t.$refs.modalViewTask.open(e.taskId)}}},[t._v("\n                                "+t._s(e.title)+"\n                            ")])]),t._v(" "),a("td",[a("p",[t._v(t._s(e.taskTypeText))])])]),t._v(" "),e.description?a("tr",[a("td",{staticClass:"small",attrs:{colspan:"2"}},[t._v("\n                            "+t._s(e.description)+"\n                        ")])]):t._e(),t._v(" "),a("tr",[a("td",{staticClass:"m-0 p-0",attrs:{colspan:"3"}},[a("ol",t._l(e.taskItems,(function(e){return a("li",[a("span",{style:{"text-decoration":e.isDone?"line-through":""}},[t._v(t._s(e.title))])])})),0)])])]}))],2)])]),t._v(" "),a("modal-add-task",{ref:"modalAddTask",on:{saved:function(e){return t.$emit("updated")}}}),t._v(" "),a("modal-view-task",{ref:"modalViewTask",on:{updated:function(e){return t.$emit("updated")},removed:function(e){return t.$emit("updated")}}})],1)}),[],!1,null,null,null).exports,F={props:{uid:String,item:Object,busy:Boolean},data:()=>({isDirty:!1,validations:new Map,lookups:{status:[{value:1,text:"Lead"},{value:2,text:"Opportunity"},{value:3,text:"Customer"},{value:4,text:"Archive"}]},editMode:!1,itemEdit:{status:null,referralSource:null,dateOfInitialContact:null,rating:null}}),computed:{viewMode(){return!this.editMode},formIsValid(){const t=this,e=(t.item,new Map);return t.isDirty=!0,t.validations=e,0==e.size}},async created(){},async mounted(){},methods:{edit(){const t=this,e=t.itemEdit,a=t.item.systemInformation;e.status=a.status,e.referralSource=a.referralSource,e.dateOfInitialContact=moment(a.dateOfInitialContact).format("YYYY-MM-DD"),e.rating=a.rating,t.editMode=!0},async save(){const t=this;try{const e=t.$util.clone(t.itemEdit);e.contactId=t.item.contactId,e.token=t.item.token,await t.$util.axios.put("/api/members/contacts/edit-system-information",e).then((e=>{t.$bvToast.toast("System information updated.",{title:"Update System Information",variant:"success",toaster:"b-toaster-bottom-right"}),t.$emit("updated")})),t.editMode=!1}catch(e){t.$util.handleError(e)}}}},A=(a("SofD"),Object(o.a)(F,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-overlay",{attrs:{show:t.busy}},[a("div",{staticClass:"p-1 text-right"},[t.viewMode?a("button",{directives:[{name:"b-toggle",rawName:"v-b-toggle.collapse-1",modifiers:{"collapse-1":!0}}],staticClass:"btn btn-warning",on:{click:t.edit}},[a("i",{staticClass:"fas fa-fw fa-edit"})]):t._e(),t._v(" "),t.editMode?a("button",{staticClass:"btn btn-primary",attrs:{disabled:t.isDirty&&!t.formIsValid},on:{click:t.save}},[a("i",{staticClass:"fas fa-fw fa-save"})]):t._e(),t._v(" "),t.editMode?a("button",{staticClass:"btn btn-secondary",on:{click:function(e){t.editMode=!1}}},[a("i",{staticClass:"fas fa-fw fa-times"})]):t._e()]),t._v(" "),a("div",{staticClass:"p-2"},[a("b-collapse",{attrs:{visible:t.viewMode}},[a("div",{staticClass:"form-row"},[a("div",{staticClass:"form-group col-md"},[a("label",[t._v("Status")]),t._v(" "),a("div",{staticClass:"form-control-plaintext"},[t._v("\n                        "+t._s(t.item.systemInformation.statusText)+"\n                    ")])]),t._v(" "),a("div",{staticClass:"form-group col-md"},[a("label",{attrs:{for:"rating"}},[t._v("Rating")]),t._v(" "),a("div",[a("b-form-rating",{attrs:{id:"rating",readonly:"",inline:!0,size:"sm",noBorder:!0},model:{value:t.item.systemInformation.rating,callback:function(e){t.$set(t.item.systemInformation,"rating",e)},expression:"item.systemInformation.rating"}})],1)]),t._v(" "),a("div",{staticClass:"form-group col-md"},[a("label",[t._v("Referral Source")]),t._v(" "),a("div",{staticClass:"form-control-plaintext"},[t._v("\n                        "+t._s(t.item.systemInformation.referralSource)+"\n                    ")])]),t._v(" "),a("div",{staticClass:"form-group col-md"},[a("label",[t._v("Date Of Initial Contact")]),t._v(" "),a("div",{staticClass:"form-control-plaintext"},[t._v("\n                        "+t._s(t._f("moment")(t.item.systemInformation.dateOfInitialContact,"calendar"))+"\n                    ")])])]),t._v(" "),a("div",{staticClass:"form-row"},[t.item.systemInformation.assignedTo!==t.item.systemInformation.createdBy?a("div",{staticClass:"form-group col-md-4"},[a("label",{attrs:{for:"createdBy"}},[t._v("Created By")]),t._v(" "),a("div",{staticClass:"form-control-plaintext"},[t._v("\n                        "+t._s(t.item.systemInformation.createdBy)+"\n                    ")])]):t._e(),t._v(" "),a("div",{staticClass:"form-group col-md-4"},[a("label",{attrs:{for:"dateCreated"}},[t._v("Date Created")]),t._v(" "),a("div",{staticClass:"form-control-plaintext"},[t._v("\n                        "+t._s(t._f("moment")(t.item.systemInformation.dateCreated,"calendar"))+"\n                    ")])]),t._v(" "),t.item.systemInformation.dateCreated!==t.item.systemInformation.dateUpdated?a("div",{staticClass:"form-group col-md-4"},[a("label",{attrs:{for:"dateUpdated"}},[t._v("Date Updated")]),t._v(" "),a("div",{staticClass:"form-control-plaintext"},[t._v("\n                        "+t._s(t._f("moment")(t.item.systemInformation.dateUpdated,"calendar"))+"\n                    ")])]):t._e()])]),t._v(" "),a("b-collapse",{attrs:{visible:t.editMode}},[a("div",{staticClass:"form-row"},[a("div",{staticClass:"form-group col-md"},[a("label",{attrs:{for:"status"}},[t._v("Status")]),t._v(" "),a("b-form-select",{attrs:{id:"status",options:t.lookups.status},model:{value:t.itemEdit.status,callback:function(e){t.$set(t.itemEdit,"status",e)},expression:"itemEdit.status"}})],1),t._v(" "),a("div",{staticClass:"form-group col-md"},[a("label",{attrs:{for:"ratingEdit"}},[t._v("Rating")]),t._v(" "),a("div",[a("b-form-rating",{attrs:{inline:"",id:"ratingEdit"},model:{value:t.itemEdit.rating,callback:function(e){t.$set(t.itemEdit,"rating",e)},expression:"itemEdit.rating"}})],1)]),t._v(" "),a("div",{staticClass:"form-group col-md"},[a("label",{attrs:{for:"referralSourceEdit"}},[t._v("Referral Source")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.itemEdit.referralSource,expression:"itemEdit.referralSource"}],staticClass:"form-control",attrs:{type:"text",id:"referralSourceEdit"},domProps:{value:t.itemEdit.referralSource},on:{input:function(e){e.target.composing||t.$set(t.itemEdit,"referralSource",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"form-group col-md"},[a("label",{attrs:{for:"dateOfInitialContactEdit"}},[t._v("Date Of Initial Contact")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.itemEdit.dateOfInitialContact,expression:"itemEdit.dateOfInitialContact"}],staticClass:"form-control",attrs:{type:"date",id:"dateOfInitialContactEdit"},domProps:{value:t.itemEdit.dateOfInitialContact},on:{input:function(e){e.target.composing||t.$set(t.itemEdit,"dateOfInitialContact",e.target.value)}}})])])])],1)])}),[],!1,null,"97095d34",null).exports),D={mixins:[i.a],components:{mInformation:C,mWork:y,mAttachments:N,mTasks:S,mSystemInformation:A},props:{uid:String,id:String},data(){return{togglesKey:`view-contact/${this.uid}/toggles`,toggles:{contactInformation:!1,workInformation:!1,systemInformation:!1,notes:!1,attachments:!1,tasks:!1},item:{systemInformation:{},notes:[],attachments:[],tasks:[]}}},computed:{},async created(){const t=this,e=JSON.parse(localStorage.getItem(t.togglesKey))||null;e&&(t.toggles=e),await t.get()},async mounted(){},methods:{async get(){const t=this;if(!t.busy)try{t.busy=!0,await t.$util.axios.get(`/api/members/contacts/${t.id}`).then((e=>{t.item=e.data}))}catch(e){t.$util.handleError(e)}finally{t.busy=!1}}}},M=(a("AC0/"),Object(o.a)(D,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{},[a("div",{staticClass:"d-flex flex-row justify-content-between align-items-sm-center"},[t._m(0),t._v(" "),a("div",{staticClass:"text-right"},[a("button",{staticClass:"btn btn-primary",on:{click:t.get}},[a("i",{staticClass:"fas fa-fw fa-sync"})]),t._v(" "),a("button",{staticClass:"btn btn-secondary",on:{click:t.close}},[a("i",{staticClass:"fas fa-fw fa-times"})])])]),t._v(" "),a("div",{staticClass:"card mt-2"},[a("div",{staticClass:"card-header d-flex flex-row justify-content-between align-items-center",on:{click:function(e){return t.toggle("contactInformation")}}},[t._m(1),t._v(" "),a("div",[a("span",[t.toggles.contactInformation?a("span",{staticClass:"fas fa-fw fa-angle-up"}):a("span",{staticClass:"fas fa-fw fa-angle-down"})])])]),t._v(" "),a("b-collapse",{model:{value:t.toggles.contactInformation,callback:function(e){t.$set(t.toggles,"contactInformation",e)},expression:"toggles.contactInformation"}},[a("m-information",{attrs:{item:t.item,busy:t.busy},on:{updated:t.get}})],1)],1),t._v(" "),a("div",{staticClass:"card mt-2"},[a("div",{staticClass:"card-header d-flex flex-row justify-content-between align-items-center",on:{click:function(e){return t.toggle("workInformation")}}},[t._m(2),t._v(" "),a("div",[a("span",[t.toggles.workInformation?a("span",{staticClass:"fas fa-fw fa-angle-up"}):a("span",{staticClass:"fas fa-fw fa-angle-down"})])])]),t._v(" "),a("b-collapse",{model:{value:t.toggles.workInformation,callback:function(e){t.$set(t.toggles,"workInformation",e)},expression:"toggles.workInformation"}},[a("m-work",{attrs:{item:t.item,busy:t.busy},on:{updated:t.get}})],1)],1),t._v(" "),a("div",{staticClass:"card mt-2"},[a("div",{staticClass:"card-header d-flex flex-row justify-content-between align-items-center",on:{click:function(e){return t.toggle("attachments")}}},[t._m(3),t._v(" "),a("div",[a("span",[t.toggles.attachments?a("span",{staticClass:"fas fa-fw fa-angle-up"}):a("span",{staticClass:"fas fa-fw fa-angle-down"})])])]),t._v(" "),a("b-collapse",{model:{value:t.toggles.attachments,callback:function(e){t.$set(t.toggles,"attachments",e)},expression:"toggles.attachments"}},[a("m-attachments",{attrs:{id:t.item.contactId,token:t.item.token,items:t.item.attachments,busy:t.busy},on:{updated:t.get}})],1)],1),t._v(" "),a("div",{staticClass:"card mt-2"},[a("div",{staticClass:"card-header d-flex flex-row justify-content-between align-items-center",on:{click:function(e){return t.toggle("tasks")}}},[t._m(4),t._v(" "),a("div",[a("span",[t.toggles.tasks?a("span",{staticClass:"fas fa-fw fa-angle-up"}):a("span",{staticClass:"fas fa-fw fa-angle-down"})])])]),t._v(" "),a("b-collapse",{model:{value:t.toggles.tasks,callback:function(e){t.$set(t.toggles,"tasks",e)},expression:"toggles.tasks"}},[a("m-tasks",{attrs:{item:t.item,busy:t.busy},on:{updated:t.get}})],1)],1),t._v(" "),a("div",{staticClass:"card mt-2"},[a("div",{staticClass:"card-header d-flex flex-row justify-content-between align-items-center",on:{click:function(e){return t.toggle("systemInformation")}}},[t._m(5),t._v(" "),a("div",[a("span",[t.toggles.systemInformation?a("span",{staticClass:"fas fa-fw fa-angle-up"}):a("span",{staticClass:"fas fa-fw fa-angle-down"})])])]),t._v(" "),a("b-collapse",{model:{value:t.toggles.systemInformation,callback:function(e){t.$set(t.toggles,"systemInformation",e)},expression:"toggles.systemInformation"}},[a("m-system-information",{attrs:{item:t.item,busy:t.busy},on:{updated:t.get}})],1)],1)])}),[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("h1",{staticClass:"h3 mb-sm-0"},[a("span",{staticClass:"fas fa-fw fa-id-card mr-1"}),t._v("View Contact\n        ")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("h5",{staticClass:"mb-0 align-self-start"},[a("span",{staticClass:"fas fa-fw fa-info-circle mr-1 d-none"}),t._v("Information\n            ")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("h5",{staticClass:"mb-0 align-self-start"},[a("span",{staticClass:"fas fa-fw fa-info-circle mr-1 d-none"}),t._v("Work\n            ")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("h5",{staticClass:"mb-0 align-self-start"},[a("span",{staticClass:"fas fa-fw fa-sticky-note mr-1 d-none"}),t._v("Attachments\n            ")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("h5",{staticClass:"mb-0 align-self-start"},[a("span",{staticClass:"fas fa-fw fa-tasks mr-1 d-none"}),t._v("Tasks\n            ")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("h5",{staticClass:"mb-0 align-self-start"},[a("span",{staticClass:"fas fa-fw fa-money-bill mr-1 d-none"}),t._v("System\n            ")])}],!1,null,"12a1484e",null).exports),O={mixins:[m.a],props:{uid:String,urlAdd:String,urlView:String},components:{},data(){return{baseUrl:"/api/members/documents",filter:{cacheKey:`filter-${this.uid}/contacts`}}},computed:{},async created(){const t=this,e=JSON.parse(localStorage.getItem(t.filter.cacheKey))||{};t.initializeFilter(e),await t.search()},async mounted(){},methods:{formatBytes(t,e=2){if(0===t)return"0 Bytes";const a=e<0?0:e,s=Math.floor(Math.log(t)/Math.log(1024));return parseFloat((t/Math.pow(1024,s)).toFixed(a))+" "+["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"][s]}}},R=Object(o.a)(O,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{},[a("div",{staticClass:"row align-items-center"},[t._m(0),t._v(" "),a("div",{staticClass:"col-sm-auto"},[a("div",{staticClass:"d-flex flex-row"},[a("div",{staticClass:"mr-1"},[a("router-link",{staticClass:"btn btn-primary",attrs:{to:"/documents/add"}},[a("i",{staticClass:"fas fa-plus"})])],1),t._v(" "),a("div",{staticClass:"flex-grow-1"},[a("div",{staticClass:"input-group"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.filter.query.criteria,expression:"filter.query.criteria"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Enter criteria...","aria-label":"Enter criteria...","aria-describedby":"button-addon2"},domProps:{value:t.filter.query.criteria},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.search(1)},input:function(e){e.target.composing||t.$set(t.filter.query,"criteria",e.target.value)}}}),t._v(" "),a("div",{staticClass:"input-group-append"},[a("button",{staticClass:"btn btn-primary",attrs:{type:"button",id:"button-addon2"},on:{click:function(e){return t.search(1)}}},[a("span",{staticClass:"fa fas fa-fw fa-search"})])])])])])])]),t._v(" "),a("b-collapse",{model:{value:t.filter.visible,callback:function(e){t.$set(t.filter,"visible",e)},expression:"filter.visible"}}),t._v(" "),a("b-overlay",{attrs:{show:t.busy}},[a("div",{staticClass:"mt-2 table-responsive shadow-sm"},[a("table-list",{attrs:{header:{key:"documentId",columns:[]},items:t.filter.items,getRowNumber:t.getRowNumber,setSelected:t.setSelected,isSelected:t.isSelected,"table-css":""},scopedSlots:t._u([{key:"header",fn:function(){return[a("th",{staticClass:"text-center"},[t._v("#")]),t._v(" "),a("th",[t._v("Name")]),t._v(" "),a("th",[t._v("Filename")]),t._v(" "),a("th",[t._v("Size")]),t._v(" "),a("th",[t._v("Type")]),t._v(" "),a("th",[t._v("Uploaded By")]),t._v(" "),a("th",[t._v("Date")]),t._v(" "),a("th")]},proxy:!0},{key:"table",fn:function(e){return[a("td",{staticClass:"text-center",domProps:{textContent:t._s(t.getRowNumber(e.index))}}),t._v(" "),a("td",{staticClass:"text-break"},[t._v("\n                        "+t._s(e.item.name)+"\n                        "),t._v(" "),a("div",{staticClass:"small"},[t._v("\n                            "+t._s(e.item.description)+"\n                        ")])]),t._v(" "),a("td",{staticClass:"text-break",domProps:{textContent:t._s(e.item.fileName)}}),t._v(" "),a("td",[t._v("\n                        "+t._s(t.formatBytes(e.item.length))+"\n                    ")]),t._v(" "),a("td",{staticClass:"text-break",domProps:{textContent:t._s(e.item.contentType)}}),t._v(" "),a("td",{staticClass:"text-break",domProps:{textContent:t._s(e.item.uploadedBy)}}),t._v(" "),a("td",[a("div",{staticClass:"small"},[t._v("\n                            Created: "+t._s(t._f("moment")(e.item.dateCreated,"calendar"))+"\n                        ")]),t._v(" "),e.item.dateCreated!==e.item.dateUpdated?a("div",{staticClass:"small"},[t._v("\n                            Updated: "+t._s(t._f("moment")(e.item.dateUpdated,"calendar"))+"\n                        ")]):t._e()]),t._v(" "),a("td",[a("a",{staticClass:"btn btn-sm btn-primary",attrs:{href:e.item.url}},[a("i",{staticClass:"fas fa-fw fa-file-download"})])])]}},{key:"list",fn:function(e){return[a("div",[a("div",{staticClass:"form-group mb-0 row no-gutters"},[a("label",{staticClass:"col-4 col-form-label"},[t._v("Name")]),t._v(" "),a("div",{staticClass:"col align-self-center"},[t._v("\n                                "+t._s(e.item.name)+"\n                                "),t._v(" "),a("div",{staticClass:"small mb-2"},[t._v("\n                                    "+t._s(e.item.description)+"\n                                ")])])]),t._v(" "),a("div",{staticClass:"form-group mb-0 row no-gutters"},[a("label",{staticClass:"col-4 col-form-label"},[t._v("Filename")]),t._v(" "),a("div",{staticClass:"col align-self-center"},[a("div",{staticClass:" text-break"},[a("a",{staticClass:"btn btn-sm btn-outline-primary mr-1",attrs:{href:e.item.url}},[a("i",{staticClass:"fas fa-fw fa-file-download"})]),t._v("\n                                    "+t._s(e.item.fileName)+"\n                                    "),a("div",[t._v("\n                                        "+t._s(t.formatBytes(e.item.length))+"\n                                    ")])])])]),t._v(" "),a("div",{staticClass:"form-group mb-0 row no-gutters"},[a("label",{staticClass:"col-4 col-form-label"},[t._v("Type")]),t._v(" "),a("div",{staticClass:"col align-self-center"},[t._v("\n                                "+t._s(e.item.contentType)+"\n                            ")])]),t._v(" "),a("div",{staticClass:"form-group mb-0 row no-gutters"},[a("label",{staticClass:"col-4 col-form-label"},[t._v("Uploaded By")]),t._v(" "),a("div",{staticClass:"col align-self-center"},[t._v("\n                                "+t._s(e.item.uploadedBy)+"\n                            ")])])])]}}])})],1)]),t._v(" "),a("m-pagination",{staticClass:"mt-2",attrs:{filter:t.filter,search:t.search,showPerPage:!0}})],1)}),[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-sm"},[a("h1",{staticClass:"h3 mb-sm-0"},[a("i",{staticClass:"fas fa-fw fa-archive mr-1"}),t._v("Documents\n            ")])])}],!1,null,null,null).exports,j={mixins:[i.a],data:()=>({isDirty:!1,validations:new Map,imageFiles:null,imageFileUrls:null,name:null,description:null}),computed:{formIsValid(){const t=this,e=(t.item,new Map);return t.name||e.set("name","Document name is required."),t.imageFilesValid||e.set("imageFiles","Document file is required."),t.isDirty=!0,t.validations=e,0==e.size},imageFilesValid(){const t=this;return Array.isArray(t.imageFiles)?t.imageFiles.length>0:null!=t.imageFiles}},methods:{getValidClass(t){return this.isDirty?this.validations.has(t)?"is-invalid":"is-valid":""},onImageFileChange(t){const e=this;var a=[];a=Array.isArray(t)?t:[t],e.imageFileUrls=[];for(var s=0;s<a.length;s++){const t=a[s];t&&e.imageFileUrls.push(URL.createObjectURL(t))}},clearImageFile(t){const e=this;Array.isArray(e.imageFiles)?(e.imageFiles.splice(t,1),e.imageFileUrls.splice(t,1)):(e.imageFiles=null,e.imageFileUrls=null)},async save(){const t=this;if(!t.busy&&t.formIsValid)try{t.busy=!0;const e={name:t.name,description:t.description},a=JSON.stringify(e),s=new Blob([a],{type:"application/json"}),i=new FormData;i.append("info",s),Array.isArray(t.imageFiles)?t.imageFiles.forEach((t=>{i.append("files",t)})):i.append("files",t.imageFiles),await t.$util.axios.post("/api/members/documents",i).then((e=>{t.$bvToast.toast("Document added.",{title:"Add Document",variant:"success",toaster:"b-toaster-bottom-right"})})),t.close()}catch(e){t.$util.handleError(e)}finally{t.busy=!1}}}},V=(a("mZsM"),Object(o.a)(j,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{},[a("div",{staticClass:"d-flex flex-column flex-sm-row justify-content-sm-between"},[t._m(0),t._v(" "),a("div",{staticClass:"text-right"},[a("b-overlay",{attrs:{show:t.busy}},[a("button",{staticClass:"btn btn-primary",attrs:{disabled:t.isDirty&&!t.formIsValid},on:{click:t.save}},[a("span",{staticClass:"fas fa-fw fa-save"})]),t._v(" "),a("button",{staticClass:"btn btn-secondary",on:{click:t.close}},[a("span",{staticClass:"fas fa-fw fa-times-circle"})])])],1)]),t._v(" "),a("div",{staticClass:"mt-2"},[a("b-overlay",{attrs:{show:t.busy}},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"name"}},[t._v("Name")]),t._v(" "),a("div",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"name"}],staticClass:"form-control",class:t.getValidClass("name"),attrs:{type:"text",id:"name"},domProps:{value:t.name},on:{input:function(e){e.target.composing||(t.name=e.target.value)}}}),t._v(" "),t.validations.has("name")?a("div",{staticClass:"invalid-feedback"},[t._v("\n                        "+t._s(t.validations.get("name"))+"\n                    ")]):t._e()])]),t._v(" "),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"description"}},[t._v("Description")]),t._v(" "),a("div",[a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.description,expression:"description"}],staticClass:"form-control",attrs:{type:"text",id:"description"},domProps:{value:t.description},on:{input:function(e){e.target.composing||(t.description=e.target.value)}}})])]),t._v(" "),a("hr"),t._v(" "),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"title"}},[t._v("Document")]),t._v(" "),a("div",[a("div",{staticClass:"d-flex flex-row"},[a("b-form-file",{attrs:{accept:"*/*",state:t.imageFilesValid,placeholder:"Choose a file or drop it here...",capture:Boolean(0),multiple:Boolean(0),"drop-placeholder":"Drop file here..."},on:{input:t.onImageFileChange},model:{value:t.imageFiles,callback:function(e){t.imageFiles=e},expression:"imageFiles"}}),t._v(" "),t.imageFileUrls?a("div",{staticClass:"ml-2"},[a("button",{staticClass:"btn btn-danger",on:{click:function(e){return t.clearImageFile(0)}}},[a("span",{staticClass:"fas fa-fw fa-trash"})])]):t._e()],1),t._v(" "),t.validations.has("imageFiles")?a("div",{staticClass:"invalid-feedback d-block"},[t._v("\n                        "+t._s(t.validations.get("imageFiles"))+"\n                    ")]):t._e(),t._v(" "),t.imageFileUrls?a("div",{staticClass:"mt-2"},t._l(t.imageFileUrls,(function(e,s){return a("div",[a("div",[t.imageFiles.type.startsWith("image/")?a("b-img-lazy",{attrs:{src:e,fluid:"",center:""}}):t._e()],1)])})),0):t._e()])])])],1)])}),[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("h1",{staticClass:"h3 mb-sm-0"},[a("i",{staticClass:"fas fa-fw fa-book mr-1"}),t._v("Add Document\n        ")])}],!1,null,"316f65db",null).exports),q={mixins:[m.a],data:()=>({}),computed:{},methods:{}},U=Object(o.a)(q,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("button",{on:{click:t.close}},[t._v("Close")]),t._v("\n    View Document \n")])}),[],!1,null,null,null).exports,B={mixins:[m.a],props:{uid:String,urlAdd:String,urlView:String},components:{modalViewTask:I},data(){return{moment:moment,baseUrl:"/api/members/tasks",lookups:{taskStatuses:[{id:0,name:"All"},{id:1,name:"Todo"},{id:2,name:"In Progress"},{id:3,name:"Done"}],taskTypes:[{id:0,name:"All"},{id:1,name:"Follow-Up Email"},{id:2,name:"Phone Call"},{id:3,name:"Demo"},{id:4,name:"Lunch Meeting"},{id:5,name:"Meetup"},{id:6,name:"Others"}]},filter:{cacheKey:`filter-${this.uid}/contacts`,query:{taskStatus:0,taskType:0}}}},computed:{},async created(){const t=this,e=t.filter,a=new URLSearchParams(window.location.search),s=JSON.parse(localStorage.getItem(e.cacheKey))||{};e.query.taskType=a.get("tt")||s.taskType||e.query.taskType,e.query.taskStatus=a.get("ts")||s.taskStatus||e.query.taskStatus,t.initializeFilter(s),await t.search()},async mounted(){},methods:{getQuery(){const t=this.filter;if(this.busy)return;return["?c=",encodeURIComponent(t.query.criteria),"&p=",t.query.pageIndex,"&s=",t.query.pageSize,"&sf=",t.query.sortField,"&so=",t.query.sortOrder,"&tt=",t.query.taskType,"&ts=",t.query.taskStatus].join("")},saveQuery(){const t=this.filter;localStorage.setItem(t.cacheKey,JSON.stringify({criteria:t.query.criteria,pageIndex:t.query.pageIndex,pageSize:t.query.pageSize,sortField:t.query.sortField,sortOrder:t.query.sortOrder,visible:t.visible,taskType:t.query.taskType,taskStatus:t.query.taskStatus}))},getTaskTdCss(t){switch(t.taskStatus){case 1:return"table-warning";case 2:return"table-info";case 3:return"table-success";default:return""}}}},L=Object(o.a)(B,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{},[a("div",{staticClass:"row align-items-center"},[t._m(0),t._v(" "),a("div",{staticClass:"col-sm-auto"},[a("div",{staticClass:"d-flex flex-row"},[a("div",{staticClass:"mr-1"},[a("button",{staticClass:"btn btn-secondary",on:{click:function(e){t.filter.visible=!t.filter.visible}}},[a("span",{staticClass:"fa fas fa-fw fa-filter"})])]),t._v(" "),a("div",{staticClass:"flex-grow-1"},[a("div",{staticClass:"input-group"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.filter.query.criteria,expression:"filter.query.criteria"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Enter criteria...","aria-label":"Enter criteria...","aria-describedby":"button-addon2"},domProps:{value:t.filter.query.criteria},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.search(1)},input:function(e){e.target.composing||t.$set(t.filter.query,"criteria",e.target.value)}}}),t._v(" "),a("div",{staticClass:"input-group-append"},[a("button",{staticClass:"btn btn-primary",attrs:{type:"button",id:"button-addon2"},on:{click:function(e){return t.search(1)}}},[a("span",{staticClass:"fa fas fa-fw fa-search"})])])])])])])]),t._v(" "),a("b-collapse",{model:{value:t.filter.visible,callback:function(e){t.$set(t.filter,"visible",e)},expression:"filter.visible"}},[a("div",{staticClass:"card p-2 mt-2"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-6 col-sm-4 col-md-3"},[a("div",{staticClass:"form-group"},[a("label",{staticClass:"col-form-label"},[t._v("Status")]),t._v(" "),a("b-select",{attrs:{options:t.lookups.taskStatuses,"value-field":"id","text-field":"name"},model:{value:t.filter.query.taskStatus,callback:function(e){t.$set(t.filter.query,"taskStatus",e)},expression:"filter.query.taskStatus"}})],1)]),t._v(" "),a("div",{staticClass:"col-6 col-sm-4 col-md-3"},[a("div",{staticClass:"form-group"},[a("label",{staticClass:"col-form-label"},[t._v("Type")]),t._v(" "),a("b-form-select",{attrs:{options:t.lookups.taskTypes,"value-field":"id","text-field":"name"},model:{value:t.filter.query.taskType,callback:function(e){t.$set(t.filter.query,"taskType",e)},expression:"filter.query.taskType"}})],1)])])])]),t._v(" "),a("b-overlay",{attrs:{show:t.busy}},[a("div",{staticClass:"mt-2 table-responsive shadow-sm"},[a("table-list",{attrs:{header:{key:"taskId",columns:[]},items:t.filter.items,getRowNumber:t.getRowNumber,setSelected:t.setSelected,isSelected:t.isSelected,"table-css":""},scopedSlots:t._u([{key:"header",fn:function(){return[a("th",{staticClass:"text-center"},[t._v("#")]),t._v(" "),a("th",[t._v("Type")]),t._v(" "),a("th",[t._v("Title")]),t._v(" "),a("th",[t._v("Contact")]),t._v(" "),a("th",[t._v("Date")])]},proxy:!0},{key:"table",fn:function(e){return[a("td",{staticClass:"text-center",class:t.getTaskTdCss(e.item),domProps:{textContent:t._s(t.getRowNumber(e.index))}}),t._v(" "),a("td",{domProps:{textContent:t._s(e.item.taskTypeText)}}),t._v(" "),a("td",[a("a",{attrs:{href:"#"},on:{click:function(a){return a.preventDefault(),t.$refs.modalViewTask.open(e.item.taskId)}}},[t._v("\n                            "+t._s(e.item.title)+"\n                        ")]),t._v(" "),a("div",{staticClass:"small"},[t._v("\n                            "+t._s(e.item.taskStatusText)+"\n                        ")])]),t._v(" "),a("td",[a("router-link",{attrs:{to:{name:"contactsView",params:{id:e.item.contact.contactId}}}},[t._v("\n                            "+t._s(e.item.contact.firstName)+" "+t._s(e.item.contact.middleName)+" "+t._s(e.item.contact.lastName)+"\n                        ")])],1),t._v(" "),a("td",{staticClass:"small"},[a("div",[t._v("\n                            Created: "+t._s(t._f("moment")(e.item.dateCreated,"calendar"))+"\n                        ")]),t._v(" "),a("div",[t._v("\n                            Assigned: "+t._s(t._f("moment")(e.item.dateAssigned,"calendar"))+"\n                        ")]),t._v(" "),t.moment(e.item.dateCompleted).isBefore()?a("div",[t._v("\n                            To Complete: "+t._s(t._f("moment")(e.item.dateCompleted,"calendar"))+"\n                        ")]):t._e()])]}},{key:"list",fn:function(e){return[a("div",[a("div",{staticClass:"form-group mb-0 row no-gutters"},[a("label",{staticClass:"col-3 col-form-label"},[t._v("Status")]),t._v(" "),a("div",{staticClass:"col align-self-center"},[t._v("\n                                "+t._s(e.item.taskStatusText)+"\n                            ")])]),t._v(" "),a("div",{staticClass:"form-group mb-0 row no-gutters"},[a("label",{staticClass:"col-3 col-form-label"},[t._v("Name")]),t._v(" "),a("div",{staticClass:"col align-self-center"},[a("a",{attrs:{href:"#"},on:{click:function(a){return a.preventDefault(),t.$refs.modalViewTask.open(e.item.taskId)}}},[t._v("\n                                    "+t._s(e.item.title)+"\n                                ")]),t._v(" "),a("div",{staticClass:"small"},[t._v("\n                                    "+t._s(e.item.taskTypeText)+"\n                                ")])])]),t._v(" "),a("div",{staticClass:"form-group mb-0 row no-gutters"},[a("label",{staticClass:"col-3 col-form-label"},[t._v("Contact")]),t._v(" "),a("div",{staticClass:"col align-self-center"},[a("router-link",{attrs:{to:{name:"contactsView",params:{id:e.item.contact.contactId}}}},[t._v("\n                                    "+t._s(e.item.contact.firstName)+" "+t._s(e.item.contact.middleName)+" "+t._s(e.item.contact.lastName)+"\n                                ")])],1)]),t._v(" "),a("div",{staticClass:"form-group mb-0 row no-gutters"},[a("label",{staticClass:"col-3 col-form-label"},[t._v("Date")]),t._v(" "),a("div",{staticClass:"col align-self-center small"},[a("div",[t._v("\n                                    Created: "+t._s(t._f("moment")(e.item.dateCreated,"calendar"))+"\n                                ")]),t._v(" "),a("div",[t._v("\n                                    Assigned: "+t._s(t._f("moment")(e.item.dateAssigned,"calendar"))+"\n                                ")]),t._v(" "),t.moment(e.item.dateCompleted).isBefore()?a("div",[t._v("\n                                    To Complete: "+t._s(t._f("moment")(e.item.dateCompleted,"calendar"))+"\n                                ")]):t._e()])])])]}}])})],1)]),t._v(" "),a("m-pagination",{staticClass:"mt-2",attrs:{filter:t.filter,search:t.search,showPerPage:!0}}),t._v(" "),a("modal-view-task",{ref:"modalViewTask",on:{updated:t.search,removed:t.search}})],1)}),[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-sm"},[a("h1",{staticClass:"h3 mb-sm-0"},[a("i",{staticClass:"fas fa-fw fa-tasks mr-1"}),t._v("Tasks\n            ")])])}],!1,null,null,null).exports,z={mixins:[i.a],data:()=>({isDirty:!1,validations:new Map,imageFiles:null,imageFileUrls:null,name:null,description:null}),computed:{formIsValid(){const t=this,e=(t.item,new Map);return t.name||e.set("name","Document name is required."),t.imageFilesValid||e.set("imageFiles","Document file is required."),t.isDirty=!0,t.validations=e,0==e.size},imageFilesValid(){const t=this;return Array.isArray(t.imageFiles)?t.imageFiles.length>0:null!=t.imageFiles}},methods:{getValidClass(t){return this.isDirty?this.validations.has(t)?"is-invalid":"is-valid":""},onImageFileChange(t){const e=this;var a=[];a=Array.isArray(t)?t:[t],e.imageFileUrls=[];for(var s=0;s<a.length;s++){const t=a[s];t&&e.imageFileUrls.push(URL.createObjectURL(t))}},clearImageFile(t){const e=this;Array.isArray(e.imageFiles)?(e.imageFiles.splice(t,1),e.imageFileUrls.splice(t,1)):(e.imageFiles=null,e.imageFileUrls=null)},async save(){const t=this;if(!t.busy&&t.formIsValid)try{t.busy=!0;const e={name:t.name,description:t.description},a=JSON.stringify(e),s=new Blob([a],{type:"application/json"}),i=new FormData;i.append("info",s),Array.isArray(t.imageFiles)?t.imageFiles.forEach((t=>{i.append("files",t)})):i.append("files",t.imageFiles),await t.$util.axios.post("/api/members/documents",i).then((e=>{t.$bvToast.toast("Document added.",{title:"Add Document",variant:"success",toaster:"b-toaster-bottom-right"})})),t.close()}catch(e){t.$util.handleError(e)}finally{t.busy=!1}}}},Y=(a("gOJU"),Object(o.a)(z,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{},[a("div",{staticClass:"d-flex flex-column flex-sm-row justify-content-sm-between"},[t._m(0),t._v(" "),a("div",{staticClass:"text-right"},[a("b-overlay",{attrs:{show:t.busy}},[a("button",{staticClass:"btn btn-primary",attrs:{disabled:t.isDirty&&!t.formIsValid},on:{click:t.save}},[a("span",{staticClass:"fas fa-fw fa-save"})]),t._v(" "),a("button",{staticClass:"btn btn-secondary",on:{click:t.close}},[a("span",{staticClass:"fas fa-fw fa-times-circle"})])])],1)]),t._v(" "),a("div",{staticClass:"mt-2"},[a("b-overlay",{attrs:{show:t.busy}},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"name"}},[t._v("Name")]),t._v(" "),a("div",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"name"}],staticClass:"form-control",class:t.getValidClass("name"),attrs:{type:"text",id:"name"},domProps:{value:t.name},on:{input:function(e){e.target.composing||(t.name=e.target.value)}}}),t._v(" "),t.validations.has("name")?a("div",{staticClass:"invalid-feedback"},[t._v("\n                        "+t._s(t.validations.get("name"))+"\n                    ")]):t._e()])]),t._v(" "),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"description"}},[t._v("Description")]),t._v(" "),a("div",[a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.description,expression:"description"}],staticClass:"form-control",attrs:{type:"text",id:"description"},domProps:{value:t.description},on:{input:function(e){e.target.composing||(t.description=e.target.value)}}})])]),t._v(" "),a("hr"),t._v(" "),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"title"}},[t._v("Document")]),t._v(" "),a("div",[a("div",{staticClass:"d-flex flex-row"},[a("b-form-file",{attrs:{accept:"*/*",state:t.imageFilesValid,placeholder:"Choose a file or drop it here...",capture:Boolean(0),multiple:Boolean(0),"drop-placeholder":"Drop file here..."},on:{input:t.onImageFileChange},model:{value:t.imageFiles,callback:function(e){t.imageFiles=e},expression:"imageFiles"}}),t._v(" "),t.imageFileUrls?a("div",{staticClass:"ml-2"},[a("button",{staticClass:"btn btn-danger",on:{click:function(e){return t.clearImageFile(0)}}},[a("span",{staticClass:"fas fa-fw fa-trash"})])]):t._e()],1),t._v(" "),t.validations.has("imageFiles")?a("div",{staticClass:"invalid-feedback d-block"},[t._v("\n                        "+t._s(t.validations.get("imageFiles"))+"\n                    ")]):t._e(),t._v(" "),t.imageFileUrls?a("div",{staticClass:"mt-2"},t._l(t.imageFileUrls,(function(e,s){return a("div",[a("div",[t.imageFiles.type.startsWith("image/")?a("b-img-lazy",{attrs:{src:e,fluid:"",center:""}}):t._e()],1)])})),0):t._e()])])])],1)])}),[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("h1",{staticClass:"h3 mb-sm-0"},[a("i",{staticClass:"fas fa-fw fa-book mr-1"}),t._v("Add Document\n        ")])}],!1,null,"896e5776",null).exports,{mixins:[i.a],data:()=>({}),computed:{},methods:{}}),W=(Object(o.a)(Y,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("button",{on:{click:t.close}},[t._v("Close")]),t._v("\n    View Document \n")])}),[],!1,null,null,null).exports,{mixins:[m.a],props:{uid:String},data(){return{baseUrl:"/api/drivers/trips/search",filter:{cacheKey:`filter-${this.uid}/search-trips`}}},computed:{},async created(){const t=this,e=JSON.parse(localStorage.getItem(t.filter.cacheKey))||{};t.initializeFilter(e),await t.search()},async mounted(){},methods:{}}),K=Object(o.a)(W,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{},[a("div",{staticClass:"row align-items-center"},[t._m(0),t._v(" "),a("div",{staticClass:"col-sm-auto"},[a("div",{staticClass:"d-flex flex-row"},[a("div",{staticClass:"flex-grow-1"},[a("div",{staticClass:"input-group"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.filter.query.criteria,expression:"filter.query.criteria"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Enter criteria...","aria-label":"Enter criteria...","aria-describedby":"button-addon2"},domProps:{value:t.filter.query.criteria},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.search(1)},input:function(e){e.target.composing||t.$set(t.filter.query,"criteria",e.target.value)}}}),t._v(" "),a("div",{staticClass:"input-group-append"},[a("button",{staticClass:"btn btn-primary",attrs:{type:"button",id:"button-addon2"},on:{click:function(e){return t.search(1)}}},[a("span",{staticClass:"fa fas fa-fw fa-search"})])])])])])])]),t._v(" "),a("b-collapse",{model:{value:t.filter.visible,callback:function(e){t.$set(t.filter,"visible",e)},expression:"filter.visible"}}),t._v(" "),a("b-overlay",{attrs:{show:t.busy}},[a("div",{staticClass:"mt-2 table-responsive shadow-sm"},[a("table-list",{attrs:{header:{key:"tripId",columns:[]},items:t.filter.items,getRowNumber:t.getRowNumber,setSelected:t.setSelected,isSelected:t.isSelected,"table-css":""},scopedSlots:t._u([{key:"header",fn:function(){return[a("th",{staticClass:"text-center"},[t._v("#")]),t._v(" "),a("th",[t._v("Rider")]),t._v(" "),a("th",[t._v("Status")]),t._v(" "),a("th",[t._v("Location")]),t._v(" "),a("th",[t._v("Date")])]},proxy:!0},{key:"table",fn:function(e){return[a("td",{staticClass:"text-center",domProps:{textContent:t._s(t.getRowNumber(e.index))}}),t._v(" "),a("td",[a("div",[a("b-avatar",{attrs:{size:"sm",src:e.item.rider.urlProfilePicture,inline:!0}}),t._v(" "),a("router-link",{attrs:{to:{name:"tripsView",params:{id:e.item.tripId}}}},[t._v("\n                                "+t._s(e.item.rider.name)+"\n                            ")]),t._v(" "),a("div",{staticClass:"mt-1"},[a("b-form-rating",{attrs:{id:"rating-inline",inline:"","no-border":"",readonly:"",size:"sm"},model:{value:e.item.rider.overallRating,callback:function(a){t.$set(e.item.rider,"overallRating",a)},expression:"row.item.rider.overallRating"}})],1)],1)]),t._v(" "),a("td",[t._v("\n                        "+t._s(e.item.statusText)+"\n                    ")]),t._v(" "),a("td",[a("div",{staticClass:"small"},[t._v("Pickup: "+t._s(e.item.startAddress))]),t._v(" "),a("div",{staticClass:"small"},[t._v("Destination: "+t._s(e.item.endAddress))])]),t._v(" "),a("td",[t._v("\n                        "+t._s(t._f("moment")(e.item.dateCreated,"calendar"))+"\n                    ")])]}},{key:"list",fn:function(e){return[a("div",[a("div",{staticClass:"form-group mb-0 row no-gutters"},[a("label",{staticClass:"col-3 col-form-label"},[t._v("Rider")]),t._v(" "),a("div",{staticClass:"col align-self-center"},[a("div",[a("b-avatar",{attrs:{size:"sm",src:e.item.rider.urlProfilePicture,inline:!0}}),t._v(" "),a("router-link",{attrs:{to:{name:"tripsView",params:{id:e.item.tripId}}}},[t._v("\n                                        "+t._s(e.item.rider.name)+"\n                                    ")]),t._v(" "),a("div",{staticClass:"mt-1"},[a("b-form-rating",{attrs:{id:"rating-inline",inline:"","no-border":"",readonly:"",size:"sm"},model:{value:e.item.rider.overallRating,callback:function(a){t.$set(e.item.rider,"overallRating",a)},expression:"row.item.rider.overallRating"}})],1)],1)])]),t._v(" "),a("div",{staticClass:"form-group mb-0 row no-gutters"},[a("label",{staticClass:"col-3 col-form-label"},[t._v("Status")]),t._v(" "),a("div",{staticClass:"col align-self-center"},[t._v("\n                                "+t._s(e.item.statusText)+"\n                            ")])]),t._v(" "),a("div",{staticClass:"form-group mb-0 row no-gutters"},[a("label",{staticClass:"col-3 col-form-label"},[t._v("Location")]),t._v(" "),a("div",{staticClass:"col align-self-center"},[a("div",{staticClass:"small"},[t._v("Pickup: "+t._s(e.item.startAddress))]),t._v(" "),a("div",{staticClass:"small"},[t._v("Destination: "+t._s(e.item.endAddress))])])]),t._v(" "),a("div",{staticClass:"form-group mb-0 row no-gutters"},[a("label",{staticClass:"col-3 col-form-label"},[t._v("Date")]),t._v(" "),a("div",{staticClass:"col align-self-center"},[t._v("\n                                "+t._s(t._f("moment")(e.item.dateCreated,"calendar"))+"\n                            ")])])])]}}])})],1)]),t._v(" "),a("m-pagination",{staticClass:"mt-2",attrs:{filter:t.filter,search:t.search,showPerPage:!0}})],1)}),[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-sm"},[a("h1",{staticClass:"h3 mb-sm-0"},[a("i",{staticClass:"fas fa-fw fa-map-marked mr-1"}),t._v("Trips\n            ")])])}],!1,null,null,null).exports,J={props:{mapName:String,draggable:Boolean,fixed:Boolean,showLocation:Boolean,cx:Number,cy:Number,startX:Number,startY:Number,endX:Number,endY:Number,markerClickAction:Function},watch:{cx:function(t,e){this.map.setCenter},cy:function(t,e){this.map.setCenter}},data:()=>({navigator:{},centerPosition:{lat:13.942504351499613,lng:120.72873957918004},map:{},marker:{},infoWindow:{},geocode:{},directionsService:{},directionsRenderer:{},items:[],markers:[],markerA:{},markerB:{}}),created(){},beforeUpdate(){},updated(){},async mounted(){const t=this;t.navigator=navigator,t.navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia||navigator.oGetUserMedia,t.centerPosition={lat:t.cx,lng:t.cy};var e=setInterval((a=>{google&&google.maps&&(clearInterval(e),t.initMap(),t.$emit("onMapReady"))}),250)},methods:{async initMap(){const t=this;var e=[];for(var a in google.maps.MapTypeId)e.push(google.maps.MapTypeId[a]);const s=Number.parseInt(localStorage.getItem("zoom"))||15;t.map=new google.maps.Map(document.getElementById(t.mapName),{center:t.centerPosition,zoom:s,mapTypeControl:!0,streetViewControl:!1,mapTypeControlOptions:{mapTypeIds:e}}),t.map.mapTypes.set("OSM",new google.maps.ImageMapType({getTileUrl:function(t,e){var a=1<<e,s=t.x%a;return s<0&&(s=a+s),"https://tile.openstreetmap.org/"+e+"/"+s+"/"+t.y+".png"},tileSize:new google.maps.Size(256,256),name:"Open Street Map",maxZoom:18})),t.infoWindow=new google.maps.InfoWindow,t.geocoder=new google.maps.Geocoder,t.directionsService=new google.maps.DirectionsService,t.directionsRenderer=new google.maps.DirectionsRenderer({suppressMarkers:!0}),t.directionsRenderer.setMap(t.map),t.navigator.geolocation?(0===t.cx&&0===t.cy?await t.getCurrentLocation():(t.map.setCenter(t.centerPosition),t.setMarker()),google.maps.event.addListener(t.map,"zoom_changed",(function(t){localStorage.setItem("zoom",this.zoom)}))):t.handleLocationError(!1,t.infoWindow,t.map.getCenter())},handleLocationError(t,e,a){const s=this;s.infoWindow.setPosition(a),s.infoWindow.setContent(t?"Error: The Geolocation service failed.":"Error: Your browser doesn't support geolocation."),s.infoWindow.open(map)},geocodeLatLng(t,e){const a=this;a.geocoder.geocode({location:e.position},(function(e,s){"OK"===s?a.$emit(t,e[0],{lat:a.centerPosition.lat,lng:a.centerPosition.lng}):window.alert("Geocoder failed due to: "+s)}))},calculateAndDisplayRoute(){const t=this;t.directionsService.route({origin:t.markerA.position,destination:t.markerB.position,travelMode:google.maps.TravelMode.DRIVING},((e,a)=>{if("OK"===a){var s=e.routes[0].legs[0];t.$emit("onCalculatedTrip",s),t.directionsRenderer.setDirections(e)}else window.alert("Directions request failed due to "+a)}))},async getCurrentLocation(){const t=this;await t.navigator.geolocation.getCurrentPosition((function(e){t.centerPosition={lat:e.coords.latitude,lng:e.coords.longitude},t.map.setCenter(t.centerPosition),t.showLocation&&t.setMarker()}))},setMarker(){const t=this;t.marker&&t.marker.setMap&&t.marker.setMap(null),t.markerA=new google.maps.Marker({draggable:t.draggable,position:new google.maps.LatLng(t.startX,t.startY),map:t.map,label:{text:"Pick up"}}),google.maps.event.addListener(t.markerA,"dragend",(function(t){})),t.markerB=new google.maps.Marker({draggable:t.draggable,position:new google.maps.LatLng(t.endX,t.endY),map:t.map,label:{text:"Destination"}}),google.maps.event.addListener(t.markerB,"dragend",(function(t){})),t.calculateAndDisplayRoute()},placeMarkers(t,e){const a=this;let s=a.markers;s&&s.length>0&&s.forEach((t=>t.setMap(null))),t&&t.length&&(s=[],t.forEach((t=>{var e=new google.maps.Marker({draggable:!1,position:{lat:t.geoX,lng:t.geoY},map:a.map,item:t,title:`${t.firstName} ${t.lastName}`});google.maps.event.addListener(e,"click",(function(t){a.markerClickAction&&a.markerClickAction(this.item)})),s.push(e)})),a.markers=s),a.map.setCenter(a.centerPosition)}}},X=Object(o.a)(J,(function(){var t=this,e=t.$createElement;return(t._self._c||e)("div",{staticStyle:{height:"100%",width:"100%"},attrs:{id:t.mapName}})}),[],!1,null,null,null).exports,G=a("EJQx"),Q={mixins:[i.a],components:{RiderMap:X,addFeedback:G.a},props:{uid:String,id:String},data(){return{togglesKey:`view-trip/driver/${this.uid}/toggles`,toggles:{information:!1,rider:!1,map:!1,timeline:!1,locations:!1},calculatedTrip:{distance:{},duration:{}},item:{rider:{}}}},computed:{},async created(){const t=JSON.parse(localStorage.getItem(this.togglesKey))||null;t&&(this.toggles=t)},async mounted(){const t=this;await t.get(),t.$bus.$on("event:driver-assigned",t.refresh),t.$bus.$on("event:rider-offered-fare-accepted",t.refresh),t.$bus.$on("event:rider-offered-fare-rejected",t.refresh),t.$bus.$on("event:rider-trip-cancelled",t.refresh),t.$bus.$on("event:rider-trip-inprogress",t.refresh),t.$bus.$on("event:rider-trip-completed",t.refresh)},methods:{async addFeedback(){this.$refs.addFeedback.open(this.id,null,null,null)},async onSaveFeedback(t){const e=this;try{const a={tripId:e.id,rating:t.rate,comment:t.comment};await e.$util.axios.put("/api/trips/driver-feedback",a).then((t=>{e.$refs.addFeedback.close()})),await e.get()}catch(t){e.$util.handleError(t)}},onCalculatedTrip(t){this.calculatedTrip=t},async refresh(t){const e=this;t.tripId===e.id&&await e.get()},async get(){const t=this;if(!t.busy)try{t.busy=!0,await t.$util.axios.get(`/api/trips/${t.id}`).then((e=>{t.item=e.data}))}catch(e){t.$util.handleError(e)}finally{t.busy=!1}},async acceptRequest(){const t=this;if(!t.busy)try{t.busy=!0;const e=t.item,a={tripId:e.tripId,token:e.token};await t.$util.axios.put("/api/trips/driver/accept-rider-request",a).then((async e=>{t.$bvToast.toast("Trip request Accepted.",{title:"Accept Trip Request",variant:"success",toaster:"b-toaster-bottom-right"})}))}catch(e){t.$util.handleError(e)}finally{t.busy=!1,await t.get()}},async rejectRequest(){const t=this;if(!t.busy){var e=prompt("Enter reason here...","Reject Reason");try{t.busy=!0;const a=t.item,s={tripId:a.tripId,token:a.token,notes:e};await t.$util.axios.put("/api/trips/driver/reject-rider-request",s).then((async e=>{t.$bvToast.toast("Trip request rejected.",{title:"Reject Trip Request",variant:"success",toaster:"b-toaster-bottom-right"})}))}catch(e){t.$util.handleError(e)}finally{t.busy=!1,await t.get()}}},async offerFare(){var t=prompt("Fare Offered",0);if(isNaN(t)||t<=0)return void alert("Invalid value for fare.");const e=this;if(!e.busy)try{e.busy=!0;const a=e.item,s={tripId:a.tripId,token:a.token,fare:t,notes:"notes here"};await e.$util.axios.put("/api/trips/driver/offer-fare-to-rider-request",s).then((async t=>{e.$bvToast.toast("Fare offer sent to rider.",{title:"Offer Fare",variant:"success",toaster:"b-toaster-bottom-right"})}))}catch(t){e.$util.handleError(t)}finally{e.busy=!1,await e.get()}},async startTrip(){const t=this;if(!t.busy)try{t.busy=!0;const e=t.item;await t.$util.axios.put(`/api/trips/${e.tripId}/driver-inprogress/${e.token}`).then((async e=>{t.$bvToast.toast("Trip started.",{title:"Start Trip",variant:"success",toaster:"b-toaster-bottom-right"})}))}catch(e){t.$util.handleError(e)}finally{t.busy=!1,await t.get()}},async completeTrip(){const t=this;if(!t.busy)try{t.busy=!0;const e=t.item;await t.$util.axios.put(`/api/trips/${e.tripId}/driver-complete/${e.token}`).then((async e=>{t.$bvToast.toast("Trip completed.",{title:"Complete Trip",variant:"success",toaster:"b-toaster-bottom-right"})}))}catch(e){t.$util.handleError(e)}finally{t.busy=!1,await t.get()}}}};a("McbD");const H=[{path:"/",name:"index",component:r},{path:"/accounts",name:"accounts",component:d},{path:"/contacts",name:"contacts",component:p},{path:"/contacts/add",name:"contactsAdd",component:g},{path:"/contacts/view/:id",name:"contactsView",component:M,props:!0},{path:"/documents",name:"documents",component:R},{path:"/documents/add",name:"documentsAdd",component:V},{path:"/documents/view/:id",name:"documentsView",component:U,props:!0},{path:"/tasks",name:"tasks",component:L},{path:"/trips",name:"trips",component:K},{path:"/trips/view/:id",name:"tripsView",component:Object(o.a)(Q,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{},[a("div",{staticClass:"d-flex flex-column flex-sm-row justify-content-between align-items-sm-center"},[a("h1",{staticClass:"h3 mb-sm-0"},[a("span",{staticClass:"fas fa-fw fa-map-marked mr-1"}),t._v("View\n            "),a("b-form-rating",{attrs:{id:"rating-inline",inline:"","no-border":"",size:"sm",readonly:""},model:{value:t.item.riderRating,callback:function(e){t.$set(t.item,"riderRating",e)},expression:"item.riderRating"}})],1),t._v(" "),a("div",{staticClass:"text-right"},[10===t.item.status?a("button",{staticClass:"btn btn-primary",on:{click:function(e){return t.addFeedback()}}},[t._v("\n                Rate Rider\n            ")]):t._e(),t._v(" "),7===t.item.status?a("button",{staticClass:"btn btn-primary",on:{click:function(e){return t.startTrip()}}},[t._v("Start")]):t._e(),t._v(" "),9===t.item.status?a("button",{staticClass:"btn btn-primary",on:{click:function(e){return t.completeTrip()}}},[t._v("Complete")]):t._e(),t._v(" "),4==t.item.status||6==t.item.status||8===t.item.status?a("button",{staticClass:"btn btn-primary",on:{click:function(e){return t.offerFare()}}},[t._v("Offer Fare")]):t._e(),t._v(" "),3==t.item.status?a("button",{staticClass:"btn btn-primary",on:{click:function(e){return t.acceptRequest()}}},[t._v("Accept")]):t._e(),t._v(" "),3==t.item.status||4==t.item.status?a("button",{staticClass:"btn btn-warning",on:{click:function(e){return t.rejectRequest()}}},[t._v("Reject")]):t._e(),t._v(" "),a("button",{staticClass:"btn btn-primary",on:{click:t.get}},[a("i",{staticClass:"fas fa-fw fa-sync"})]),t._v(" "),a("button",{staticClass:"btn btn-secondary",on:{click:t.close}},[a("i",{staticClass:"fas fa-fw fa-times"})])])]),t._v(" "),a("div",{staticClass:"card mt-2"},[a("div",{staticClass:"card-header d-flex flex-row justify-content-between align-items-center",on:{click:function(e){return t.toggle("information")}}},[t._m(0),t._v(" "),a("div",[a("span",[t.toggles.information?a("span",{staticClass:"fas fa-fw fa-angle-up"}):a("span",{staticClass:"fas fa-fw fa-angle-down"})])])]),t._v(" "),a("b-collapse",{model:{value:t.toggles.information,callback:function(e){t.$set(t.toggles,"information",e)},expression:"toggles.information"}},[a("div",{staticClass:"p-2"},[a("div",{staticClass:"form-row"},[a("div",{staticClass:"form-group col-md"},[a("label",[t._v("Status")]),t._v(" "),a("div",{staticClass:"form-control-plaintext"},[t._v("\n                            "+t._s(t.item.statusText)+"\n                        ")]),t._v(" "),a("div",{staticClass:"small"},[t._v("\n                            "+t._s(t.item.cancelReason)+"\n                        ")])]),t._v(" "),a("div",{staticClass:"form-group col-md"},[a("label",[t._v("Pickup")]),t._v(" "),a("div",{staticClass:"form-control-plaintext"},[t._v("\n                            "+t._s(t.item.startAddress)+"\n                            "),a("div",{staticClass:"small"},[t._v("\n                                "+t._s(t.item.startAddressDescription)+"\n                            ")])])]),t._v(" "),a("div",{staticClass:"form-group col-md"},[a("label",[t._v("Destination")]),t._v(" "),a("div",{staticClass:"form-control-plaintext"},[t._v("\n                            "+t._s(t.item.endAddress)+"\n                            "),a("div",{staticClass:"small"},[t._v("\n                                "+t._s(t.item.endAddressDescription)+"\n                            ")])])])])])])],1),t._v(" "),a("div",{staticClass:"card mt-2"},[a("div",{staticClass:"card-header d-flex flex-row justify-content-between align-items-center",on:{click:function(e){return t.toggle("rider")}}},[t._m(1),t._v(" "),a("div",[a("span",[t.toggles.rider?a("span",{staticClass:"fas fa-fw fa-angle-up"}):a("span",{staticClass:"fas fa-fw fa-angle-down"})])])]),t._v(" "),a("b-collapse",{model:{value:t.toggles.rider,callback:function(e){t.$set(t.toggles,"rider",e)},expression:"toggles.rider"}},[a("div",{staticClass:"p-2"},[a("div",{staticClass:"text-right"},[a("button",{staticClass:"btn btn-primary",on:{click:function(e){return e.preventDefault(),t.$bus.$emit("event:send-message",t.item.rider.riderId)}}},[a("i",{staticClass:"fas fa-fw fa-envelope"})]),t._v(" "),a("a",{staticClass:"btn btn-primary",attrs:{href:"tel:"+t.item.rider.phoneNumber}},[a("i",{staticClass:"fas fa-fw fa-phone"})]),t._v(" "),a("a",{staticClass:"btn btn-primary",attrs:{href:"sms:"+t.item.rider.phoneNumber}},[a("i",{staticClass:"fas fa-fw fa-sms"})])]),t._v(" "),a("div",{staticClass:"mt-2 form-row"},[a("div",{staticClass:"form-group col-md"},[a("label",[t._v("Name")]),t._v(" "),a("div",{staticClass:"align-self-center"},[a("b-avatar",{attrs:{src:t.item.rider.urlProfilePicture,inline:!0}}),t._v(" "),a("span",[t._v("\n                                "+t._s(t.item.rider.name)+"\n                            ")]),t._v(" "),a("div",{staticClass:"mt-2"},[a("b-form-rating",{attrs:{id:"rating-inline",inline:"","no-border":"",readonly:"",size:"sm"},model:{value:t.item.rider.overallRating,callback:function(e){t.$set(t.item.rider,"overallRating",e)},expression:"item.rider.overallRating"}})],1)],1)]),t._v(" "),a("div",{staticClass:"form-group col-sm"},[a("label",[t._v("Phone Number")]),t._v(" "),a("div",{staticClass:"form-control-plaintext"},[t._v("\n                            "+t._s(t.item.rider.phoneNumber)+"\n                        ")])]),t._v(" "),a("div",{staticClass:"form-group col-sm"},[a("label",[t._v("Offer")]),t._v(" "),a("div",{staticClass:"form-control-plaintext"},[t._v("\n                            "+t._s(t._f("toCurrency")(t.item.fare))+"\n                        ")])])])])])],1),t._v(" "),a("div",{staticClass:"card mt-2"},[a("div",{staticClass:"card-header d-flex flex-row justify-content-between align-items-center",on:{click:function(e){return t.toggle("map")}}},[t._m(2),t._v(" "),a("div",[a("span",[t.toggles.map?a("span",{staticClass:"fas fa-fw fa-angle-up"}):a("span",{staticClass:"fas fa-fw fa-angle-down"})])])]),t._v(" "),a("b-collapse",{model:{value:t.toggles.map,callback:function(e){t.$set(t.toggles,"map",e)},expression:"toggles.map"}},[a("div",{staticClass:"form-row"},[a("div",{staticClass:"form-group col"},[a("label",[a("i",{staticClass:"fas fa-fw fa-map-signs"}),t._v("Distance\n                    ")]),t._v(" "),a("div",{attrs:{readonly:""}},[t._v("\n                        "+t._s(t.calculatedTrip.distance.text)+"\n                    ")])]),t._v(" "),a("div",{staticClass:"form-group col"},[a("label",[a("i",{staticClass:"fas fa-fw fa-clock"}),t._v("Duration\n                    ")]),t._v(" "),a("div",{attrs:{readonly:""}},[t._v("\n                        "+t._s(t.calculatedTrip.duration.text)+"\n                    ")])])]),t._v(" "),t.item.startAddress&&t.toggles.map?a("div",{staticStyle:{height:"500px"}},[a("rider-map",{attrs:{"map-name":"add-trip",fixed:!1,"show-location":!0,cx:t.item.startX,cy:t.item.startY,startX:t.item.startX,startY:t.item.startY,endX:t.item.endX,endY:t.item.endY,draggable:!1},on:{onCalculatedTrip:t.onCalculatedTrip}})],1):t._e()])],1),t._v(" "),a("div",{staticClass:"card mt-2"},[a("div",{staticClass:"card-header d-flex flex-row justify-content-between align-items-center",on:{click:function(e){return t.toggle("timeline")}}},[t._m(3),t._v(" "),a("div",[a("span",[t.toggles.timeline?a("span",{staticClass:"fas fa-fw fa-angle-up"}):a("span",{staticClass:"fas fa-fw fa-angle-down"})])])]),t._v(" "),a("b-collapse",{model:{value:t.toggles.timeline,callback:function(e){t.$set(t.toggles,"timeline",e)},expression:"toggles.timeline"}},[a("div",{staticClass:"table-responsive mb-0"},[a("table",{staticClass:"table table-sm"},[a("thead",[a("tr",[a("th",[t._v("#")]),t._v(" "),a("th",[t._v("Status")]),t._v(" "),a("th",[t._v("Notes")])])]),t._v(" "),a("tbody",t._l(t.item.timelines,(function(e,s){return a("tr",[a("td",[t._v(t._s(s+1))]),t._v(" "),a("td",[a("div",[t._v("\n                                    "+t._s(e.statusText)+"\n                                ")]),t._v(" "),a("div",{staticClass:"small ml-3"},[t._v("\n                                    "+t._s(t._f("moment")(e.dateTimeline,"calendar"))+"\n                                ")])]),t._v(" "),a("td",[t._v(t._s(e.notes))])])})),0)])])])],1),t._v(" "),a("add-feedback",{ref:"addFeedback",on:{onSave:t.onSaveFeedback}})],1)}),[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("h5",{staticClass:"mb-0 align-self-start"},[a("span",{staticClass:"fas fa-fw fa-info-circle mr-1"}),t._v("Information\n            ")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("h5",{staticClass:"mb-0 align-self-start"},[a("span",{staticClass:"fas fa-fw fa-street-view mr-1"}),t._v("Rider\n            ")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("h5",{staticClass:"mb-0 align-self-start"},[a("span",{staticClass:"fas fa-fw fa-map mr-1"}),t._v("Map\n            ")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("h5",{staticClass:"mb-0 align-self-start"},[a("span",{staticClass:"fas fa-fw fa-history mr-1"}),t._v("Timeline\n            ")])}],!1,null,null,null).exports,props:!0},{path:"*",component:{template:"<div>Not found</div>"}}],Z=new s.a({base:"/driver",mode:"history",routes:H});e.a=Z},SofD:function(t,e,a){"use strict";a("gQia")},SpUA:function(t,e,a){},T2kB:function(t,e,a){"use strict";a("0OlL")},VOYw:function(t,e,a){"use strict";a.r(e),function(t){a("zCnV"),a("38u5");var e=a("oCYn"),s=a("X7NA"),i=a("hf7O"),n=a("bM+u"),o=a("jE9Z"),r=a("RjEP"),l=(a("SSho"),a("n7CS")),c=a("jEab"),d=a("nC7C"),m=a("luJ8");e.default.use(i.a),e.default.use(n.a),e.default.use(o.a),e.default.component("m-pagination",l.a),e.default.component("sort-field",c.a),e.default.component("table-list",d.a),e.default.component("gmap-location",m.a),new e.default({el:"#app",router:r.a,components:{App:s.a},created(){t(document).ready((function(){t(".main").addClass("main-loaded")}))}})}.call(this,a("EVdn"))},X7NA:function(t,e,a){"use strict";var s=a("8GYW"),i=a("y2gb"),n=a("8/S3"),o=a("It2h"),r=a("IImL"),l=a("KUgy"),c={mixins:[n.a],props:{uid:String,appName:{type:String,required:!0,default:"LMS"},urlProfilePicture:String,menus:Array},components:{NotificationsDrawer:o.a,MessagesDrawer:r.a,TeamsDrawer:l.a}},d=a("KHd+"),m=Object(d.a)(c,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-navbar",{attrs:{toggleable:"sm",fixed:"top",sticky:!0,type:"dark",variant:"dark"}},[a("div",{staticClass:"container-lg"},[a("a",{staticClass:"navbar-brand",attrs:{href:"/"}},[t._v(t._s(t.appName))]),t._v(" "),a("div",{staticClass:"collapse navbar-collapse",attrs:{id:"navbarColor01"}},[a("ul",{staticClass:"navbar-nav"},t._l(t.menus,(function(e){return a("li",{staticClass:"nav-item"},[a("router-link",{staticClass:"nav-link",attrs:{to:e.to}},[a("span",{staticClass:"mr-1",class:e.icon}),t._v(" "),a("span",{staticClass:"d-none d-md-inline",domProps:{textContent:t._s(e.label)}})])],1)})),0)]),t._v(" "),a("ul",{staticClass:"navbar-nav ml-auto flex-row"},[a("li",{directives:[{name:"show",rawName:"v-show",value:t.messages.length>0,expression:"messages.length>0"}],staticClass:"nav-item"},[a("a",{directives:[{name:"b-toggle",rawName:"v-b-toggle.messagesDrawer",modifiers:{messagesDrawer:!0}}],staticClass:"nav-link",attrs:{href:"#",role:"button"},on:{click:function(t){t.preventDefault()}}},[a("i",{staticClass:"fas fa-envelope fa-fw"}),t._v(" "),a("span",{staticClass:"badge badge-danger"},[a("span",[t._v(t._s(t.messages.length))])])])]),t._v(" "),a("li",{directives:[{name:"show",rawName:"v-show",value:t.notifications.length>0,expression:"notifications.length>0"}],staticClass:"nav-item px-2 px-sm-0"},[a("a",{directives:[{name:"b-toggle",rawName:"v-b-toggle.notificationsDrawer",modifiers:{notificationsDrawer:!0}}],staticClass:"nav-link",attrs:{href:"#"},on:{click:function(t){t.preventDefault()}}},[a("i",{staticClass:"fas fa-fw fa-bell"}),t._v(" "),a("span",{staticClass:"badge badge-danger"},[a("span",[t._v(t._s(t.notifications.length))])])])]),t._v(" "),a("li",{staticClass:"nav-item px-2 px-sm-0 dropdown"},[a("a",{staticClass:"nav-link dropdown-toggle",attrs:{href:"#",id:"userDropdown",role:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}},[a("b-avatar",{attrs:{variant:"info",size:"sm",src:t.urlProfilePicture}})],1),t._v(" "),a("div",{staticClass:"dropdown-menu dropdown-menu-right",staticStyle:{position:"absolute"},attrs:{"aria-labelledby":"userDropdown"}},[a("router-link",{staticClass:"dropdown-item",attrs:{to:"/accounts"}},[a("i",{staticClass:"fas fa-user fa-sm fa-fw mr-2"}),t._v("\n                        Account\n                    ")]),t._v(" "),a("div",{staticClass:"dropdown-divider"}),t._v(" "),a("a",{staticClass:"dropdown-item",attrs:{href:"/"}},[a("i",{staticClass:"fas fa-home fa-sm fa-fw mr-2"}),t._v("\n                        Home Page\n                    ")]),t._v(" "),a("div",{staticClass:"dropdown-divider"}),t._v(" "),a("a",{staticClass:"dropdown-item",attrs:{href:"#","data-toggle":"modal","data-target":"#logoutModal"}},[a("i",{staticClass:"fas fa-sign-out-alt fa-sm fa-fw mr-2 "}),t._v("\n                        Logout\n                    ")])],1)])])]),t._v(" "),a("notifications-drawer",{attrs:{notifications:t.notifications,"url-view-trip":"tripsView"}}),t._v(" "),a("messages-drawer",{attrs:{messages:t.messages}})],1)}),[],!1,null,null,null).exports,v={props:{appName:String}},u=Object(d.a)(v,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-sidebar",{attrs:{id:"navDrawer",title:t.appName,backdrop:"",shadow:""}},[a("div",{staticClass:"list-group list-group-flush"},[a("router-link",{staticClass:"list-group-item list-group-item-action",attrs:{to:"/"}},[a("span",{staticClass:"fas fa-fw fa-home mr-1"}),t._v("Home\n        ")]),t._v(" "),a("router-link",{staticClass:"list-group-item list-group-item-action",attrs:{to:"/contacts"}},[a("span",{staticClass:"fas fa-fw fa-id-card mr-1"}),t._v("Contacts\n        ")]),t._v(" "),a("router-link",{staticClass:"list-group-item list-group-item-action",attrs:{to:"/tasks"}},[a("span",{staticClass:"fas fa-fw fa-tasks mr-1"}),t._v("Tasks\n        ")]),t._v(" "),a("router-link",{staticClass:"list-group-item list-group-item-action",attrs:{to:"/documents"}},[a("span",{staticClass:"fas fa-fw fa-archive mr-1"}),t._v("Documents\n        ")])],1)])}),[],!1,null,null,null).exports,f={mixins:[a("EQT1").a],props:{uid:String,menus:Array},data:()=>({}),computed:{},async created(){},async mounted(){},methods:{}},p=Object(d.a)(f,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-navbar",{staticClass:"d-block d-sm-none",attrs:{fixed:"bottom",type:"dark",variant:"dark"}},[a("b-navbar-nav",{attrs:{align:"center",justified:!0}},t._l(t.menus,(function(e){return a("li",{staticClass:"nav-item"},[a("router-link",{staticClass:"nav-link",attrs:{to:e.to}},[a("span",{staticClass:"mr-1",class:e.icon}),t._v(" "),a("span",{staticClass:"d-none d-md-inline",domProps:{textContent:t._s(e.label)}})])],1)})),0)],1)}),[],!1,null,null,null).exports,_={mixins:[s.a],components:{modalViewChat:i.a,AppBar:m,NavDrawer:u,BottomNav:p},props:{uid:String,appName:String,urlProfilePicture:String},data:()=>({menus:[{to:"/",label:"Dashboard",icon:"fas fa-fw fa-tachometer-alt"},{to:"/trips",label:"Trips",icon:"fas fa-fw fa-map-marked"}]}),async mounted(){const t=this;t.$bus.$on("event:driver-assigned",(async function(e){t.$bvToast.toast("The system has assigned you as driver to a trip request.",{title:"Driver Assigned",variant:"info",solid:!0})})),t.$bus.$on("event:rider-offered-fare-accepted",(async function(e){t.$bvToast.toast(`The rider accepted the offered fare ${e.fare}.`,{title:"Rider Accepted Offered Fare",variant:"info",solid:!0})})),t.$bus.$on("event:rider-offered-fare-rejected",(async function(e){t.$bvToast.toast(`The rider rejected the offered fare ${e.fare}.`,{title:"Rider Rejected Offered Fare",variant:"info",solid:!0})})),t.$bus.$on("event:rider-trip-cancelled",(async function(e){t.$bvToast.toast(`Rider cancelled the trip request, with reason "${e.reason}".`,{title:"Trip Cancelled",variant:"info",solid:!0})})),t.$bus.$on("event:rider-trip-inprogress",(async function(e){t.$bvToast.toast("The rider set the trip request to In-Progress",{title:"Trip In-Progress",variant:"info",solid:!0})})),t.$bus.$on("event:rider-trip-completed",(async function(e){t.$bvToast.toast("The rider set the trip request to Completed.",{title:"Trip Completed",variant:"info",solid:!0})}))},async created(){},methods:{}},g=Object(d.a)(_,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{},[a("app-bar",{attrs:{uid:t.uid,appName:t.appName,urlProfilePicture:t.urlProfilePicture,menus:t.menus}}),t._v(" "),a("main",{staticClass:"container-lg main mb-5 mb-md-0 pb-5 pb-sm-0"},[a("router-view",{attrs:{uid:t.uid}})],1),t._v(" "),a("bottom-nav",{attrs:{menus:t.menus}}),t._v(" "),a("modal-view-chat",{ref:"modalViewChat",attrs:{uid:t.uid}})],1)}),[],!1,null,null,null);e.a=g.exports},gOJU:function(t,e,a){"use strict";a("4BK8")},gQia:function(t,e,a){},mZsM:function(t,e,a){"use strict";a("G/qJ")},nusY:function(t,e,a){"use strict";a("7WaM")},wLdd:function(t,e,a){"use strict";a("4lgk")},wOqt:function(t,e,a){}});